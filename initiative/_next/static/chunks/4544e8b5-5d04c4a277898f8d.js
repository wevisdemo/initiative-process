(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[611],{9842:function(a,b,c){!/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */ function(c,b){a.exports=b()}(this,function(){return function(b){var c={};function a(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return b[d].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return a.m=b,a.c=c,a.d=function(b,c,d){a.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:d})},a.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},a.t=function(b,c){if(1&c&&(b=a(b)),8&c||4&c&&"object"==typeof b&&b&&b.__esModule)return b;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:b}),2&c&&"string"!=typeof b)for(var e in b)a.d(d,e,(function(a){return b[a]}).bind(null,e));return d},a.n=function(c){var b=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(b,"a",b),b},a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.p="",a(a.s=21)}([function(b,e){var d,a={};b.exports=a,a._nextId=0,a._seed=0,a._nowStartTime=+new Date,a._warnedOnce={},a._decomp=null,a.extend=function(c,h){var f,e;"boolean"==typeof h?(f=2,e=h):(f=1,e=!0);for(var g=f;g<arguments.length;g++){var d=arguments[g];if(d)for(var b in d)e&&d[b]&&d[b].constructor===Object?c[b]&&c[b].constructor!==Object?c[b]=d[b]:(c[b]=c[b]||{},a.extend(c[b],e,d[b])):c[b]=d[b]}return c},a.clone=function(b,c){return a.extend({},c,b)},a.keys=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)b.push(c);return b},a.values=function(a){var b=[];if(Object.keys){for(var d=Object.keys(a),c=0;c<d.length;c++)b.push(a[d[c]]);return b}for(var e in a)b.push(a[e]);return b},a.get=function(b,a,d,e){a=a.split(".").slice(d,e);for(var c=0;c<a.length;c+=1)b=b[a[c]];return b},a.set=function(e,b,c,f,g){var d=b.split(".").slice(f,g);return a.get(e,b,0,-1)[d[d.length-1]]=c,c},a.shuffle=function(b){for(var c=b.length-1;c>0;c--){var d=Math.floor(a.random()*(c+1)),e=b[c];b[c]=b[d],b[d]=e}return b},a.choose=function(b){return b[Math.floor(a.random()*b.length)]},a.isElement=function(a){return"undefined"!=typeof HTMLElement?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},a.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},a.isFunction=function(a){return"function"==typeof a},a.isPlainObject=function(a){return"object"==typeof a&&a.constructor===Object},a.isString=function(a){return"[object String]"===toString.call(a)},a.clamp=function(a,b,c){return a<b?b:a>c?c:a},a.sign=function(a){return a<0?-1:1},a.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-a._nowStartTime},a.random=function(a,b){return b=void 0!==b?b:1,(a=void 0!==a?a:0)+d()*(b-a)},d=function(){return a._seed=(9301*a._seed+49297)%233280,a._seed/233280},a.colorToNumber=function(a){return 3==(a=a.replace("#","")).length&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},a.logLevel=1,a.log=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.info=function(){console&&a.logLevel>0&&a.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warn=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warnOnce=function(){var b=Array.prototype.slice.call(arguments).join(" ");a._warnedOnce[b]||(a.warn(b),a._warnedOnce[b]=!0)},a.deprecated=function(b,c,d){b[c]=a.chain(function(){a.warnOnce("\u{1F505} deprecated \u{1F505}",d)},b[c])},a.nextId=function(){return a._nextId++},a.indexOf=function(a,c){if(a.indexOf)return a.indexOf(c);for(var b=0;b<a.length;b++)if(a[b]===c)return b;return -1},a.map=function(a,c){if(a.map)return a.map(c);for(var d=[],b=0;b<a.length;b+=1)d.push(c(a[b]));return d},a.topologicalSort=function(c){var d=[],e=[],f=[];for(var b in c)e[b]||f[b]||a._topologicalSort(b,e,f,c,d);return d},a._topologicalSort=function(b,d,c,g,h){var i=g[b]||[];c[b]=!0;for(var e=0;e<i.length;e+=1){var f=i[e];!c[f]&&(d[f]||a._topologicalSort(f,d,c,g,h))}c[b]=!1,d[b]=!0,h.push(b)},a.chain=function(){for(var a=[],b=0;b<arguments.length;b+=1){var c=arguments[b];c._chained?a.push.apply(a,c._chained):a.push(c)}var d=function(){for(var c,d=Array(arguments.length),b=0,f=arguments.length;b<f;b++)d[b]=arguments[b];for(b=0;b<a.length;b+=1){var e=a[b].apply(c,d);void 0!==e&&(c=e)}return c};return d._chained=a,d},a.chainPathBefore=function(b,c,d){return a.set(b,c,a.chain(d,a.get(b,c)))},a.chainPathAfter=function(b,c,d){return a.set(b,c,a.chain(a.get(b,c),d))},a.setDecomp=function(b){a._decomp=b},a.getDecomp=function(){var b=a._decomp;try{b||"undefined"==typeof window||(b=window.decomp),b|| void 0===c.g||(b=c.g.decomp)}catch(d){b=null}return b}},function(b,c){var a={};b.exports=a,a.create=function(b){var c={min:{x:0,y:0},max:{x:0,y:0}};return b&&a.update(c,b),c},a.update=function(a,e,c){a.min.x=1/0,a.max.x=-1/0,a.min.y=1/0,a.max.y=-1/0;for(var d=0;d<e.length;d++){var b=e[d];b.x>a.max.x&&(a.max.x=b.x),b.x<a.min.x&&(a.min.x=b.x),b.y>a.max.y&&(a.max.y=b.y),b.y<a.min.y&&(a.min.y=b.y)}c&&(c.x>0?a.max.x+=c.x:a.min.x+=c.x,c.y>0?a.max.y+=c.y:a.min.y+=c.y)},a.contains=function(a,b){return b.x>=a.min.x&&b.x<=a.max.x&&b.y>=a.min.y&&b.y<=a.max.y},a.overlaps=function(a,b){return a.min.x<=b.max.x&&a.max.x>=b.min.x&&a.max.y>=b.min.y&&a.min.y<=b.max.y},a.translate=function(a,b){a.min.x+=b.x,a.max.x+=b.x,a.min.y+=b.y,a.max.y+=b.y},a.shift=function(a,b){var c=a.max.x-a.min.x,d=a.max.y-a.min.y;a.min.x=b.x,a.max.x=b.x+c,a.min.y=b.y,a.max.y=b.y+d}},function(b,c){var a={};b.exports=a,a.create=function(a,b){return{x:a||0,y:b||0}},a.clone=function(a){return{x:a.x,y:a.y}},a.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},a.magnitudeSquared=function(a){return a.x*a.x+a.y*a.y},a.rotate=function(b,c,a){var d=Math.cos(c),e=Math.sin(c);a||(a={});var f=b.x*d-b.y*e;return a.y=b.x*e+b.y*d,a.x=f,a},a.rotateAbout=function(c,d,a,b){var e=Math.cos(d),f=Math.sin(d);b||(b={});var g=a.x+((c.x-a.x)*e-(c.y-a.y)*f);return b.y=a.y+((c.x-a.x)*f+(c.y-a.y)*e),b.x=g,b},a.normalise=function(b){var c=a.magnitude(b);return 0===c?{x:0,y:0}:{x:b.x/c,y:b.y/c}},a.dot=function(a,b){return a.x*b.x+a.y*b.y},a.cross=function(a,b){return a.x*b.y-a.y*b.x},a.cross3=function(a,b,c){return(b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x)},a.add=function(b,c,a){return a||(a={}),a.x=b.x+c.x,a.y=b.y+c.y,a},a.sub=function(b,c,a){return a||(a={}),a.x=b.x-c.x,a.y=b.y-c.y,a},a.mult=function(a,b){return{x:a.x*b,y:a.y*b}},a.div=function(a,b){return{x:a.x/b,y:a.y/b}},a.perp=function(b,a){return{x:-((a=!0===a?-1:1)*b.y),y:a*b.x}},a.neg=function(a){return{x:-a.x,y:-a.y}},a.angle=function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)},a._temp=[a.create(),a.create(),a.create(),a.create(),a.create(),a.create()]},function(c,d,b){var a={};c.exports=a;var e=b(2),f=b(0);a.create=function(b,e){for(var c=[],a=0;a<b.length;a++){var d=b[a],f={x:d.x,y:d.y,index:a,body:e,isInternal:!1};c.push(f)}return c},a.fromPath=function(b,c){var d=[];return b.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,function(c,a,b){d.push({x:parseFloat(a),y:parseFloat(b)})}),a.create(d,c)},a.centre=function(b){for(var g,h,d,i=a.area(b,!0),f={x:0,y:0},c=0;c<b.length;c++)d=(c+1)%b.length,g=e.cross(b[c],b[d]),h=e.mult(e.add(b[c],b[d]),g),f=e.add(f,h);return e.div(f,6*i)},a.mean=function(a){for(var c={x:0,y:0},b=0;b<a.length;b++)c.x+=a[b].x,c.y+=a[b].y;return e.div(c,a.length)},a.area=function(a,e){for(var c=0,d=a.length-1,b=0;b<a.length;b++)c+=(a[d].x-a[b].x)*(a[d].y+a[b].y),d=b;return e?c/2:Math.abs(c)/2},a.inertia=function(h,i){for(var d,c,f=0,g=0,a=h,b=0;b<a.length;b++)c=(b+1)%a.length,f+=(d=Math.abs(e.cross(a[c],a[b])))*(e.dot(a[c],a[c])+e.dot(a[c],a[b])+e.dot(a[b],a[b])),g+=d;return i/6*(f/g)},a.translate=function(c,d,a){a=void 0!==a?a:1;var b,e=c.length,f=d.x*a,g=d.y*a;for(b=0;b<e;b++)c[b].x+=f,c[b].y+=g;return c},a.rotate=function(c,d,g){if(0!==d){var a,e,f,b,h=Math.cos(d),i=Math.sin(d),j=g.x,k=g.y,l=c.length;for(b=0;b<l;b++)e=(a=c[b]).x-j,f=a.y-k,a.x=j+(e*h-f*i),a.y=k+(e*i+f*h);return c}},a.contains=function(c,e){for(var b,g=e.x,h=e.y,f=c.length,a=c[f-1],d=0;d<f;d++){if(b=c[d],(g-a.x)*(b.y-a.y)+(h-a.y)*(a.x-b.x)>0)return!1;a=b}return!0},a.scale=function(b,g,h,c){if(1===g&&1===h)return b;c=c||a.centre(b);for(var i,f,d=0;d<b.length;d++)i=b[d],f=e.sub(i,c),b[d].x=c.x+f.x*g,b[d].y=c.y+f.y*h;return b},a.chamfer=function(c,b,h,j,k){b="number"==typeof b?[b]:b||[8],h=void 0!==h?h:-1,j=j||2,k=k||14;for(var l=[],a=0;a<c.length;a++){var o=c[a-1>=0?a-1:c.length-1],d=c[a],p=c[(a+1)%c.length],i=b[a<b.length?a:b.length-1];if(0===i){l.push(d);continue}var m=e.normalise({x:d.y-o.y,y:o.x-d.x}),q=e.normalise({x:p.y-d.y,y:d.x-p.x}),r=Math.sqrt(2*Math.pow(i,2)),s=e.mult(f.clone(m),i),t=e.normalise(e.mult(e.add(m,q),.5)),u=e.sub(d,e.mult(t,r)),g=h;-1===h&&(g=1.75*Math.pow(i,.32)),(g=f.clamp(g,j,k))%2==1&&(g+=1);for(var v=Math.acos(e.dot(m,q)),w=v/g,n=0;n<g;n++)l.push(e.add(e.rotate(s,w*n),u))}return l},a.clockwiseSort=function(b){var c=a.mean(b);return b.sort(function(a,b){return e.angle(c,a)-e.angle(c,b)}),b},a.isConvex=function(a){var b,c,g,d,e=0,f=a.length;if(f<3)return null;for(b=0;b<f;b++)if(c=(b+1)%f,g=(b+2)%f,d=(a[c].x-a[b].x)*(a[g].y-a[c].y),d-=(a[c].y-a[b].y)*(a[g].x-a[c].x),d<0?e|=1:d>0&&(e|=2),3===e)return!1;return 0!==e||null},a.hull=function(d){var f,c,a=[],b=[];for((d=d.slice(0)).sort(function(a,b){var c=a.x-b.x;return 0!==c?c:a.y-b.y}),c=0;c<d.length;c+=1){for(f=d[c];b.length>=2&&0>=e.cross3(b[b.length-2],b[b.length-1],f);)b.pop();b.push(f)}for(c=d.length-1;c>=0;c-=1){for(f=d[c];a.length>=2&&0>=e.cross3(a[a.length-2],a[a.length-1],f);)a.pop();a.push(f)}return a.pop(),b.pop(),a.concat(b)}},function(b,d,c){var a={};b.exports=a;var e=c(0);a.on=function(a,f,d){for(var b,e=f.split(" "),c=0;c<e.length;c++)b=e[c],a.events=a.events||{},a.events[b]=a.events[b]||[],a.events[b].push(d);return d},a.off=function(b,a,g){if(!a){b.events={};return}"function"==typeof a&&(g=a,a=e.keys(b.events).join(" "));for(var h=a.split(" "),c=0;c<h.length;c++){var d=b.events[h[c]],i=[];if(g&&d)for(var f=0;f<d.length;f++)d[f]!==g&&i.push(d[f]);b.events[h[c]]=i}},a.trigger=function(a,k,b){var c,j,d,f,g=a.events;if(g&&e.keys(g).length>0){b||(b={}),c=k.split(" ");for(var h=0;h<c.length;h++)if(d=g[j=c[h]]){(f=e.clone(b,!1)).name=j,f.source=a;for(var i=0;i<d.length;i++)d[i].apply(a,[f])}}}},function(c,d,b){var a={};c.exports=a;var e=b(4),f=b(0),g=b(1),h=b(6);a.create=function(a){return f.extend({id:f.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},a)},a.setModified=function(b,c,d,e){if(b.isModified=c,c&&b.cache&&(b.cache.allBodies=null,b.cache.allConstraints=null,b.cache.allComposites=null),d&&b.parent&&a.setModified(b.parent,c,d,e),e)for(var f=0;f<b.composites.length;f++){var g=b.composites[f];a.setModified(g,c,d,e)}},a.add=function(b,d){var h=[].concat(d);e.trigger(b,"beforeAdd",{object:d});for(var g=0;g<h.length;g++){var c=h[g];switch(c.type){case"body":if(c.parent!==c){f.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(b,c);break;case"constraint":a.addConstraint(b,c);break;case"composite":a.addComposite(b,c);break;case"mouseConstraint":a.addConstraint(b,c.constraint)}}return e.trigger(b,"afterAdd",{object:d}),b},a.remove=function(b,d,f){var h=[].concat(d);e.trigger(b,"beforeRemove",{object:d});for(var g=0;g<h.length;g++){var c=h[g];switch(c.type){case"body":a.removeBody(b,c,f);break;case"constraint":a.removeConstraint(b,c,f);break;case"composite":a.removeComposite(b,c,f);break;case"mouseConstraint":a.removeConstraint(b,c.constraint)}}return e.trigger(b,"afterRemove",{object:d}),b},a.addComposite=function(b,c){return b.composites.push(c),c.parent=b,a.setModified(b,!0,!0,!1),b},a.removeComposite=function(b,d,g){var e=f.indexOf(b.composites,d);if(-1!==e&&a.removeCompositeAt(b,e),g)for(var c=0;c<b.composites.length;c++)a.removeComposite(b.composites[c],d,!0);return b},a.removeCompositeAt=function(b,c){return b.composites.splice(c,1),a.setModified(b,!0,!0,!1),b},a.addBody=function(b,c){return b.bodies.push(c),a.setModified(b,!0,!0,!1),b},a.removeBody=function(b,d,g){var e=f.indexOf(b.bodies,d);if(-1!==e&&a.removeBodyAt(b,e),g)for(var c=0;c<b.composites.length;c++)a.removeBody(b.composites[c],d,!0);return b},a.removeBodyAt=function(b,c){return b.bodies.splice(c,1),a.setModified(b,!0,!0,!1),b},a.addConstraint=function(b,c){return b.constraints.push(c),a.setModified(b,!0,!0,!1),b},a.removeConstraint=function(b,d,g){var e=f.indexOf(b.constraints,d);if(-1!==e&&a.removeConstraintAt(b,e),g)for(var c=0;c<b.composites.length;c++)a.removeConstraint(b.composites[c],d,!0);return b},a.removeConstraintAt=function(b,c){return b.constraints.splice(c,1),a.setModified(b,!0,!0,!1),b},a.clear=function(b,d,e){if(e)for(var c=0;c<b.composites.length;c++)a.clear(b.composites[c],d,!0);return d?b.bodies=b.bodies.filter(function(a){return a.isStatic}):b.bodies.length=0,b.constraints.length=0,b.composites.length=0,a.setModified(b,!0,!0,!1),b},a.allBodies=function(b){if(b.cache&&b.cache.allBodies)return b.cache.allBodies;for(var c=[].concat(b.bodies),d=0;d<b.composites.length;d++)c=c.concat(a.allBodies(b.composites[d]));return b.cache&&(b.cache.allBodies=c),c},a.allConstraints=function(b){if(b.cache&&b.cache.allConstraints)return b.cache.allConstraints;for(var c=[].concat(b.constraints),d=0;d<b.composites.length;d++)c=c.concat(a.allConstraints(b.composites[d]));return b.cache&&(b.cache.allConstraints=c),c},a.allComposites=function(b){if(b.cache&&b.cache.allComposites)return b.cache.allComposites;for(var c=[].concat(b.composites),d=0;d<b.composites.length;d++)c=c.concat(a.allComposites(b.composites[d]));return b.cache&&(b.cache.allComposites=c),c},a.get=function(c,f,e){var b,d;switch(e){case"body":b=a.allBodies(c);break;case"constraint":b=a.allConstraints(c);break;case"composite":b=a.allComposites(c).concat(c)}return b?0===(d=b.filter(function(a){return a.id.toString()===f.toString()})).length?null:d[0]:null},a.move=function(b,c,d){return a.remove(b,c),a.add(d,c),b},a.rebase=function(b){for(var d=a.allBodies(b).concat(a.allConstraints(b)).concat(a.allComposites(b)),c=0;c<d.length;c++)d[c].id=f.nextId();return b},a.translate=function(b,e,f){for(var d=f?a.allBodies(b):b.bodies,c=0;c<d.length;c++)h.translate(d[c],e);return b},a.rotate=function(d,e,b,m){for(var g=Math.cos(e),i=Math.sin(e),j=m?a.allBodies(d):d.bodies,f=0;f<j.length;f++){var c=j[f],k=c.position.x-b.x,l=c.position.y-b.y;h.setPosition(c,{x:b.x+(k*g-l*i),y:b.y+(k*i+l*g)}),h.rotate(c,e)}return d},a.scale=function(d,f,g,b,j){for(var i=j?a.allBodies(d):d.bodies,e=0;e<i.length;e++){var c=i[e],k=c.position.x-b.x,l=c.position.y-b.y;h.setPosition(c,{x:b.x+k*f,y:b.y+l*g}),h.scale(c,f,g)}return d},a.bounds=function(f){for(var c=a.allBodies(f),d=[],b=0;b<c.length;b+=1){var e=c[b];d.push(e.bounds.min,e.bounds.max)}return g.create(d)}},function(c,e,b){var a={};c.exports=a;var f=b(3),g=b(2),h=b(7);b(16);var d,i=b(0),j=b(1),k=b(11);a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a.create=function(a){var c={id:i.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:f.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},b=i.extend(c,a);return d(b,a),b},a.nextGroup=function(b){return b?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory},d=function(b,c){c=c||{},a.set(b,{bounds:b.bounds||j.create(b.vertices),positionPrev:b.positionPrev||g.clone(b.position),anglePrev:b.anglePrev||b.angle,vertices:b.vertices,parts:b.parts||[b],isStatic:b.isStatic,isSleeping:b.isSleeping,parent:b.parent||b}),f.rotate(b.vertices,b.angle,b.position),k.rotate(b.axes,b.angle),j.update(b.bounds,b.vertices,b.velocity),a.set(b,{axes:c.axes||b.axes,area:c.area||b.area,mass:c.mass||b.mass,inertia:c.inertia||b.inertia});var d=b.isStatic?"#14151f":i.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),e=b.isStatic?"#555":"#ccc",h=b.isStatic&&null===b.render.fillStyle?1:0;b.render.fillStyle=b.render.fillStyle||d,b.render.strokeStyle=b.render.strokeStyle||e,b.render.lineWidth=b.render.lineWidth||h,b.render.sprite.xOffset+=-(b.bounds.min.x-b.position.x)/(b.bounds.max.x-b.bounds.min.x),b.render.sprite.yOffset+=-(b.bounds.min.y-b.position.y)/(b.bounds.max.y-b.bounds.min.y)},a.set=function(c,e,b){var d;for(d in"string"==typeof e&&(d=e,(e={})[d]=b),e)if(Object.prototype.hasOwnProperty.call(e,d))switch(b=e[d],d){case"isStatic":a.setStatic(c,b);break;case"isSleeping":h.set(c,b);break;case"mass":a.setMass(c,b);break;case"density":a.setDensity(c,b);break;case"inertia":a.setInertia(c,b);break;case"vertices":a.setVertices(c,b);break;case"position":a.setPosition(c,b);break;case"angle":a.setAngle(c,b);break;case"velocity":a.setVelocity(c,b);break;case"angularVelocity":a.setAngularVelocity(c,b);break;case"parts":a.setParts(c,b);break;case"centre":a.setCentre(c,b);break;default:c[d]=b}},a.setStatic=function(c,d){for(var b=0;b<c.parts.length;b++){var a=c.parts[b];a.isStatic=d,d?(a._original={restitution:a.restitution,friction:a.friction,mass:a.mass,inertia:a.inertia,density:a.density,inverseMass:a.inverseMass,inverseInertia:a.inverseInertia},a.restitution=0,a.friction=1,a.mass=a.inertia=a.density=1/0,a.inverseMass=a.inverseInertia=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.angularVelocity=0,a.speed=0,a.angularSpeed=0,a.motion=0):a._original&&(a.restitution=a._original.restitution,a.friction=a._original.friction,a.mass=a._original.mass,a.inertia=a._original.inertia,a.density=a._original.density,a.inverseMass=a._original.inverseMass,a.inverseInertia=a._original.inverseInertia,a._original=null)}},a.setMass=function(a,b){var c=a.inertia/(a.mass/6);a.inertia=c*(b/6),a.inverseInertia=1/a.inertia,a.mass=b,a.inverseMass=1/a.mass,a.density=a.mass/a.area},a.setDensity=function(b,c){a.setMass(b,c*b.area),b.density=c},a.setInertia=function(a,b){a.inertia=b,a.inverseInertia=1/a.inertia},a.setVertices=function(b,c){c[0].body===b?b.vertices=c:b.vertices=f.create(c,b),b.axes=k.fromVertices(b.vertices),b.area=f.area(b.vertices),a.setMass(b,b.density*b.area);var d=f.centre(b.vertices);f.translate(b.vertices,d,-1),a.setInertia(b,a._inertiaScale*f.inertia(b.vertices,b.mass)),f.translate(b.vertices,b.position),j.update(b.bounds,b.vertices,b.velocity)},a.setParts=function(b,d,h){for(d=d.slice(0),b.parts.length=0,b.parts.push(b),b.parent=b,e=0;e<d.length;e++){var e,i=d[e];i!==b&&(i.parent=b,b.parts.push(i))}if(1!==b.parts.length){if(h=void 0===h||h){var g=[];for(e=0;e<d.length;e++)g=g.concat(d[e].vertices);f.clockwiseSort(g);var j=f.hull(g),k=f.centre(j);a.setVertices(b,j),f.translate(b.vertices,k)}var c=a._totalProperties(b);b.area=c.area,b.parent=b,b.position.x=c.centre.x,b.position.y=c.centre.y,b.positionPrev.x=c.centre.x,b.positionPrev.y=c.centre.y,a.setMass(b,c.mass),a.setInertia(b,c.inertia),a.setPosition(b,c.centre)}},a.setCentre=function(a,b,c){c?(a.positionPrev.x+=b.x,a.positionPrev.y+=b.y,a.position.x+=b.x,a.position.y+=b.y):(a.positionPrev.x=b.x-(a.position.x-a.positionPrev.x),a.positionPrev.y=b.y-(a.position.y-a.positionPrev.y),a.position.x=b.x,a.position.y=b.y)},a.setPosition=function(a,e){var b=g.sub(e,a.position);a.positionPrev.x+=b.x,a.positionPrev.y+=b.y;for(var d=0;d<a.parts.length;d++){var c=a.parts[d];c.position.x+=b.x,c.position.y+=b.y,f.translate(c.vertices,b),j.update(c.bounds,c.vertices,a.velocity)}},a.setAngle=function(a,e){var c=e-a.angle;a.anglePrev+=c;for(var d=0;d<a.parts.length;d++){var b=a.parts[d];b.angle+=c,f.rotate(b.vertices,c,a.position),k.rotate(b.axes,c),j.update(b.bounds,b.vertices,a.velocity),d>0&&g.rotateAbout(b.position,c,a.position,b.position)}},a.setVelocity=function(a,b){a.positionPrev.x=a.position.x-b.x,a.positionPrev.y=a.position.y-b.y,a.velocity.x=b.x,a.velocity.y=b.y,a.speed=g.magnitude(a.velocity)},a.setAngularVelocity=function(a,b){a.anglePrev=a.angle-b,a.angularVelocity=b,a.angularSpeed=Math.abs(a.angularVelocity)},a.translate=function(b,c){a.setPosition(b,g.add(b.position,c))},a.rotate=function(b,d,c){if(c){var e=Math.cos(d),f=Math.sin(d),g=b.position.x-c.x,h=b.position.y-c.y;a.setPosition(b,{x:c.x+(g*e-h*f),y:c.y+(g*f+h*e)}),a.setAngle(b,b.angle+d)}else a.setAngle(b,b.angle+d)},a.scale=function(c,e,h,d){var i=0,l=0;d=d||c.position;for(var g=0;g<c.parts.length;g++){var b=c.parts[g];f.scale(b.vertices,e,h,d),b.axes=k.fromVertices(b.vertices),b.area=f.area(b.vertices),a.setMass(b,c.density*b.area),f.translate(b.vertices,{x:-b.position.x,y:-b.position.y}),a.setInertia(b,a._inertiaScale*f.inertia(b.vertices,b.mass)),f.translate(b.vertices,{x:b.position.x,y:b.position.y}),g>0&&(i+=b.area,l+=b.inertia),b.position.x=d.x+(b.position.x-d.x)*e,b.position.y=d.y+(b.position.y-d.y)*h,j.update(b.bounds,b.vertices,c.velocity)}c.parts.length>1&&(c.area=i,c.isStatic||(a.setMass(c,c.density*i),a.setInertia(c,l))),c.circleRadius&&(e===h?c.circleRadius*=e:c.circleRadius=null)},a.update=function(a,l,i,d){var e=Math.pow(l*i*a.timeScale,2),h=1-a.frictionAir*i*a.timeScale,m=a.position.x-a.positionPrev.x,n=a.position.y-a.positionPrev.y;a.velocity.x=m*h*d+a.force.x/a.mass*e,a.velocity.y=n*h*d+a.force.y/a.mass*e,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.position.x+=a.velocity.x,a.position.y+=a.velocity.y,a.angularVelocity=(a.angle-a.anglePrev)*h*d+a.torque/a.inertia*e,a.anglePrev=a.angle,a.angle+=a.angularVelocity,a.speed=g.magnitude(a.velocity),a.angularSpeed=Math.abs(a.angularVelocity);for(var c=0;c<a.parts.length;c++){var b=a.parts[c];f.translate(b.vertices,a.velocity),c>0&&(b.position.x+=a.velocity.x,b.position.y+=a.velocity.y),0!==a.angularVelocity&&(f.rotate(b.vertices,a.angularVelocity,a.position),k.rotate(b.axes,a.angularVelocity),c>0&&g.rotateAbout(b.position,a.angularVelocity,a.position,b.position)),j.update(b.bounds,b.vertices,a.velocity)}},a.applyForce=function(a,c,b){a.force.x+=b.x,a.force.y+=b.y;var d={x:c.x-a.position.x,y:c.y-a.position.y};a.torque+=d.x*b.y-d.y*b.x},a._totalProperties=function(c){for(var a={mass:0,area:0,inertia:0,centre:{x:0,y:0}},d=1===c.parts.length?0:1;d<c.parts.length;d++){var b=c.parts[d],e=b.mass!==1/0?b.mass:1;a.mass+=e,a.area+=b.area,a.inertia+=b.inertia,a.centre=g.add(a.centre,g.mult(b.position,e))}return a.centre=g.div(a.centre,a.mass),a}},function(b,d,c){var a={};b.exports=a;var e=c(4);a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(e,c){for(var g=c*c*c,d=0;d<e.length;d++){var b=e[d],f=b.speed*b.speed+b.angularSpeed*b.angularSpeed;if(0!==b.force.x||0!==b.force.y){a.set(b,!1);continue}var h=Math.min(b.motion,f),i=Math.max(b.motion,f);b.motion=a._minBias*h+(1-a._minBias)*i,b.sleepThreshold>0&&b.motion<a._motionSleepThreshold*g?(b.sleepCounter+=1,b.sleepCounter>=b.sleepThreshold&&a.set(b,!0)):b.sleepCounter>0&&(b.sleepCounter-=1)}},a.afterCollisions=function(g,d){for(var j=d*d*d,e=0;e<g.length;e++){var h=g[e];if(h.isActive){var i=h.collision,b=i.bodyA.parent,c=i.bodyB.parent;if((!b.isSleeping||!c.isSleeping)&&!b.isStatic&&!c.isStatic&&(b.isSleeping||c.isSleeping)){var f=b.isSleeping&&!b.isStatic?b:c,k=f===b?c:b;!f.isStatic&&k.motion>a._motionWakeThreshold*j&&a.set(f,!1)}}}},a.set=function(a,c){var b=a.isSleeping;c?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,b||e.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,b&&e.trigger(a,"sleepEnd"))}},function(c,g,b){var a={};c.exports=a;var d,e,f,h=b(3),i=b(9);d=[],e={overlap:0,axis:null},f={overlap:0,axis:null},a.create=function(a,b){return{pair:null,collided:!1,bodyA:a,bodyB:b,parentA:a.parent,parentB:b.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},a.collides=function(c,d,q){if(a._overlapAxes(e,c.vertices,d.vertices,c.axes),e.overlap<=0||(a._overlapAxes(f,d.vertices,c.vertices,d.axes),f.overlap<=0))return null;var n,b,r=q&&q.table[i.id(c,d)];r?b=r.collision:((b=a.create(c,d)).collided=!0,b.bodyA=c.id<d.id?c:d,b.bodyB=c.id<d.id?d:c,b.parentA=b.bodyA.parent,b.parentB=b.bodyB.parent),c=b.bodyA,d=b.bodyB,n=e.overlap<f.overlap?e:f;var g=b.normal,k=b.supports,s=n.axis,o=s.x,p=s.y;o*(d.position.x-c.position.x)+p*(d.position.y-c.position.y)<0?(g.x=o,g.y=p):(g.x=-o,g.y=-p),b.tangent.x=-g.y,b.tangent.y=g.x,b.depth=n.overlap,b.penetration.x=g.x*b.depth,b.penetration.y=g.y*b.depth;var l=a._findSupports(c,d,g,1),j=0;if(h.contains(c.vertices,l[0])&&(k[j++]=l[0]),h.contains(c.vertices,l[1])&&(k[j++]=l[1]),j<2){var m=a._findSupports(d,c,g,-1);h.contains(d.vertices,m[0])&&(k[j++]=m[0]),j<2&&h.contains(d.vertices,m[1])&&(k[j++]=m[1])}return 0===j&&(k[j++]=l[0]),k.length=j,b},a._overlapAxes=function(o,c,d,j){var k,p,q,b,e,a,t=c.length,u=d.length,v=c[0].x,w=c[0].y,x=d[0].x,y=d[0].y,z=j.length,l=Number.MAX_VALUE,r=0;for(e=0;e<z;e++){var s=j[e],f=s.x,g=s.y,h=v*f+w*g,i=x*f+y*g,m=h,n=i;for(a=1;a<t;a+=1)(b=c[a].x*f+c[a].y*g)>m?m=b:b<h&&(h=b);for(a=1;a<u;a+=1)(b=d[a].x*f+d[a].y*g)>n?n=b:b<i&&(i=b);if((k=(p=m-i)<(q=n-h)?p:q)<l&&(l=k,r=e,k<=0))break}o.axis=j[r],o.overlap=l},a._projectToAxis=function(g,a,b){for(var c=a[0].x*b.x+a[0].y*b.y,f=c,d=1;d<a.length;d+=1){var e=a[d].x*b.x+a[d].y*b.y;e>f?f=e:e<c&&(c=e)}g.min=c,g.max=f},a._findSupports=function(m,q,n,o){var b,a,h,p,c,e=q.vertices,f=e.length,i=m.position.x,j=m.position.y,k=n.x*o,l=n.y*o,g=Number.MAX_VALUE;for(c=0;c<f;c+=1)(p=k*(i-(a=e[c]).x)+l*(j-a.y))<g&&(g=p,b=a);return(g=k*(i-(h=e[(f+b.index-1)%f]).x)+l*(j-h.y),a=e[(b.index+1)%f],k*(i-a.x)+l*(j-a.y)<g)?(d[0]=b,d[1]=a,d):(d[0]=b,d[1]=h,d)}},function(b,d,c){var a={};b.exports=a;var e=c(17);a.create=function(b,c){var d=b.bodyA,e=b.bodyB,f={id:a.id(d,e),bodyA:d,bodyB:e,collision:b,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:d.isSensor||e.isSensor,timeCreated:c,timeUpdated:c,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return a.update(f,b,c),f},a.update=function(a,d,m){var i=a.contacts,j=d.supports,g=a.activeContacts,b=d.parentA,c=d.parentB,n=b.vertices.length;a.isActive=!0,a.timeUpdated=m,a.collision=d,a.separation=d.depth,a.inverseMass=b.inverseMass+c.inverseMass,a.friction=b.friction<c.friction?b.friction:c.friction,a.frictionStatic=b.frictionStatic>c.frictionStatic?b.frictionStatic:c.frictionStatic,a.restitution=b.restitution>c.restitution?b.restitution:c.restitution,a.slop=b.slop>c.slop?b.slop:c.slop,d.pair=a,g.length=0;for(var h=0;h<j.length;h++){var f=j[h],k=f.body===b?f.index:n+f.index,l=i[k];l?g.push(l):g.push(i[k]=e.create(f))}},a.setActive=function(a,b,c){b?(a.isActive=!0,a.timeUpdated=c):(a.isActive=!1,a.activeContacts.length=0)},a.id=function(a,b){return a.id<b.id?"A"+a.id+"B"+b.id:"A"+b.id+"B"+a.id}},function(c,d,b){var a={};c.exports=a;var e=b(3),f=b(2),g=b(7),h=b(1),i=b(11),j=b(0);a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(c){var a=c;a.bodyA&&!a.pointA&&(a.pointA={x:0,y:0}),a.bodyB&&!a.pointB&&(a.pointB={x:0,y:0});var d=a.bodyA?f.add(a.bodyA.position,a.pointA):a.pointA,e=a.bodyB?f.add(a.bodyB.position,a.pointB):a.pointB,g=f.magnitude(f.sub(d,e));a.length=void 0!==a.length?a.length:g,a.id=a.id||j.nextId(),a.label=a.label||"Constraint",a.type="constraint",a.stiffness=a.stiffness||(a.length>0?1:.7),a.damping=a.damping||0,a.angularStiffness=a.angularStiffness||0,a.angleA=a.bodyA?a.bodyA.angle:a.angleA,a.angleB=a.bodyB?a.bodyB.angle:a.angleB,a.plugin={};var b={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===a.length&&a.stiffness>.1?(b.type="pin",b.anchors=!1):a.stiffness<.9&&(b.type="spring"),a.render=j.extend(b,a.render),a},a.preSolveAll=function(d){for(var c=0;c<d.length;c+=1){var b=d[c],a=b.constraintImpulse;!b.isStatic&&(0!==a.x||0!==a.y||0!==a.angle)&&(b.position.x+=a.x,b.position.y+=a.y,b.angle+=a.angle)}},a.solveAll=function(d,g){for(var c=0;c<d.length;c+=1){var b=d[c],e=!b.bodyA||b.bodyA&&b.bodyA.isStatic,f=!b.bodyB||b.bodyB&&b.bodyB.isStatic;(e||f)&&a.solve(d[c],g)}for(c=0;c<d.length;c+=1)e=!(b=d[c]).bodyA||b.bodyA&&b.bodyA.isStatic,f=!b.bodyB||b.bodyB&&b.bodyB.isStatic,e||f||a.solve(d[c],g)},a.solve=function(d,u){var b=d.bodyA,c=d.bodyB,j=d.pointA,k=d.pointB;if(b||c){b&&!b.isStatic&&(f.rotate(j,b.angle-d.angleA,j),d.angleA=b.angle),c&&!c.isStatic&&(f.rotate(k,c.angle-d.angleB,k),d.angleB=c.angle);var n=j,o=k;if(b&&(n=f.add(b.position,j)),c&&(o=f.add(c.position,k)),n&&o){var p=f.sub(n,o),l=f.magnitude(p);l<a._minLength&&(l=a._minLength);var h,e,i,m,r,v=(l-d.length)/l,w=d.stiffness<1?d.stiffness*u:d.stiffness,g=f.mult(p,v*w),q=(b?b.inverseMass:0)+(c?c.inverseMass:0),x=(b?b.inverseInertia:0)+(c?c.inverseInertia:0),s=q+x;if(d.damping){var t=f.create();i=f.div(p,l),r=f.sub(c&&f.sub(c.position,c.positionPrev)||t,b&&f.sub(b.position,b.positionPrev)||t),m=f.dot(i,r)}b&&!b.isStatic&&(e=b.inverseMass/q,b.constraintImpulse.x-=g.x*e,b.constraintImpulse.y-=g.y*e,b.position.x-=g.x*e,b.position.y-=g.y*e,d.damping&&(b.positionPrev.x-=d.damping*i.x*m*e,b.positionPrev.y-=d.damping*i.y*m*e),h=f.cross(j,g)/s*a._torqueDampen*b.inverseInertia*(1-d.angularStiffness),b.constraintImpulse.angle-=h,b.angle-=h),c&&!c.isStatic&&(e=c.inverseMass/q,c.constraintImpulse.x+=g.x*e,c.constraintImpulse.y+=g.y*e,c.position.x+=g.x*e,c.position.y+=g.y*e,d.damping&&(c.positionPrev.x+=d.damping*i.x*m*e,c.positionPrev.y+=d.damping*i.y*m*e),h=f.cross(k,g)/s*a._torqueDampen*c.inverseInertia*(1-d.angularStiffness),c.constraintImpulse.angle+=h,c.angle+=h)}}},a.postSolveAll=function(l){for(var k=0;k<l.length;k++){var d=l[k],b=d.constraintImpulse;if(!d.isStatic&&(0!==b.x||0!==b.y||0!==b.angle)){g.set(d,!1);for(var j=0;j<d.parts.length;j++){var c=d.parts[j];e.translate(c.vertices,b),j>0&&(c.position.x+=b.x,c.position.y+=b.y),0!==b.angle&&(e.rotate(c.vertices,b.angle,d.position),i.rotate(c.axes,b.angle),j>0&&f.rotateAbout(c.position,b.angle,d.position,c.position)),h.update(c.bounds,c.vertices,d.velocity)}b.angle*=a._warming,b.x*=a._warming,b.y*=a._warming}}},a.pointAWorld=function(a){return{x:(a.bodyA?a.bodyA.position.x:0)+a.pointA.x,y:(a.bodyA?a.bodyA.position.y:0)+a.pointA.y}},a.pointBWorld=function(a){return{x:(a.bodyB?a.bodyB.position.x:0)+a.pointB.x,y:(a.bodyB?a.bodyB.position.y:0)+a.pointB.y}}},function(c,d,b){var a={};c.exports=a;var e=b(2),f=b(0);a.fromVertices=function(a){for(var d={},b=0;b<a.length;b++){var g=(b+1)%a.length,c=e.normalise({x:a[g].y-a[b].y,y:a[b].x-a[g].x}),h=0===c.y?1/0:c.x/c.y;d[h=h.toFixed(3).toString()]=c}return f.values(d)},a.rotate=function(d,b){if(0!==b)for(var e=Math.cos(b),f=Math.sin(b),c=0;c<d.length;c++){var g,a=d[c];g=a.x*e-a.y*f,a.y=a.x*f+a.y*e,a.x=g}}},function(c,d,b){var a={};c.exports=a;var e=b(3),f=b(0),g=b(6),h=b(1),i=b(2);a.rectangle=function(i,j,d,h,a){a=a||{};var c={label:"Rectangle Body",position:{x:i,y:j},vertices:e.fromPath("L 0 0 L "+d+" 0 L "+d+" "+h+" L 0 "+h)};if(a.chamfer){var b=a.chamfer;c.vertices=e.chamfer(c.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete a.chamfer}return g.create(f.extend({},c,a))},a.trapezoid=function(n,o,k,c,d,a){a=a||{};var l,p=(1-2*(d*=.5))*k,h=k*d,i=h+p,m=i+h;l=d<.5?"L 0 0 L "+h+" "+ -c+" L "+i+" "+ -c+" L "+m+" 0":"L 0 0 L "+i+" "+ -c+" L "+m+" 0";var j={label:"Trapezoid Body",position:{x:n,y:o},vertices:e.fromPath(l)};if(a.chamfer){var b=a.chamfer;j.vertices=e.chamfer(j.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete a.chamfer}return g.create(f.extend({},j,a))},a.circle=function(g,h,b,c,e){c=c||{};var i={label:"Circle Body",circleRadius:b},d=Math.ceil(Math.max(10,Math.min(e=e||25,b)));return d%2==1&&(d+=1),a.polygon(g,h,d,b,f.extend({},i,c))},a.polygon=function(k,l,d,h,b){if(b=b||{},d<3)return a.circle(k,l,h,b);for(var m=2*Math.PI/d,n="",p=.5*m,i=0;i<d;i+=1){var o=p+i*m,q=Math.cos(o)*h,r=Math.sin(o)*h;n+="L "+q.toFixed(3)+" "+r.toFixed(3)+" "}var j={label:"Polygon Body",position:{x:k,y:l},vertices:e.fromPath(n)};if(b.chamfer){var c=b.chamfer;j.vertices=e.chamfer(j.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete b.chamfer}return g.create(f.extend({},j,b))},a.fromVertices=function(C,D,l,p,q,m,n,o){var w,x,b,y,I,c,a,r,j,s,k,d=f.getDecomp();for(w=Boolean(d&&d.quickDecomp),p=p||{},b=[],q=void 0!==q&&q,m=void 0!==m?m:.01,n=void 0!==n?n:10,o=void 0!==o?o:.01,f.isArray(l[0])||(l=[l]),s=0;s<l.length;s+=1)if(c=l[s],(y=e.isConvex(c))||w||f.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),y||!w)c=y?e.clockwiseSort(c):e.hull(c),b.push({position:{x:C,y:D},vertices:c});else{var t=c.map(function(a){return[a.x,a.y]});d.makeCCW(t),!1!==m&&d.removeCollinearPoints(t,m),!1!==o&&d.removeDuplicatePoints&&d.removeDuplicatePoints(t,o);var E=d.quickDecomp(t);for(a=0;a<E.length;a++){var z=E[a].map(function(a){return{x:a[0],y:a[1]}});n>0&&e.area(z)<n||b.push({position:e.centre(z),vertices:z})}}for(a=0;a<b.length;a++)b[a]=g.create(f.extend(b[a],p));if(q){var F=5;for(a=0;a<b.length;a++){var A=b[a];for(r=a+1;r<b.length;r++){var B=b[r];if(h.overlaps(A.bounds,B.bounds)){var u=A.vertices,v=B.vertices;for(j=0;j<A.vertices.length;j++)for(k=0;k<B.vertices.length;k++){var G=i.magnitudeSquared(i.sub(u[(j+1)%u.length],v[k])),H=i.magnitudeSquared(i.sub(u[j],v[(k+1)%v.length]));G<F&&H<F&&(u[j].isInternal=!0,v[k].isInternal=!0)}}}}}return b.length>1?(x=g.create(f.extend({parts:b.slice(0)},p)),g.setPosition(x,{x:C,y:D}),x):b[0]}},function(b,d,c){var a={};b.exports=a;var e=c(0);a.create=function(c){var b={};return c||e.log("Mouse.create: element was undefined, defaulting to document.body","warn"),b.element=c||document.body,b.absolute={x:0,y:0},b.position={x:0,y:0},b.mousedownPosition={x:0,y:0},b.mouseupPosition={x:0,y:0},b.offset={x:0,y:0},b.scale={x:1,y:1},b.wheelDelta=0,b.button=-1,b.pixelRatio=parseInt(b.element.getAttribute("data-pixel-ratio"),10)||1,b.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},b.mousemove=function(c){var d=a._getRelativeMousePosition(c,b.element,b.pixelRatio);c.changedTouches&&(b.button=0,c.preventDefault()),b.absolute.x=d.x,b.absolute.y=d.y,b.position.x=b.absolute.x*b.scale.x+b.offset.x,b.position.y=b.absolute.y*b.scale.y+b.offset.y,b.sourceEvents.mousemove=c},b.mousedown=function(c){var d=a._getRelativeMousePosition(c,b.element,b.pixelRatio);c.changedTouches?(b.button=0,c.preventDefault()):b.button=c.button,b.absolute.x=d.x,b.absolute.y=d.y,b.position.x=b.absolute.x*b.scale.x+b.offset.x,b.position.y=b.absolute.y*b.scale.y+b.offset.y,b.mousedownPosition.x=b.position.x,b.mousedownPosition.y=b.position.y,b.sourceEvents.mousedown=c},b.mouseup=function(c){var d=a._getRelativeMousePosition(c,b.element,b.pixelRatio);c.changedTouches&&c.preventDefault(),b.button=-1,b.absolute.x=d.x,b.absolute.y=d.y,b.position.x=b.absolute.x*b.scale.x+b.offset.x,b.position.y=b.absolute.y*b.scale.y+b.offset.y,b.mouseupPosition.x=b.position.x,b.mouseupPosition.y=b.position.y,b.sourceEvents.mouseup=c},b.mousewheel=function(a){b.wheelDelta=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail)),a.preventDefault()},a.setElement(b,b.element),b},a.setElement=function(a,b){a.element=b,b.addEventListener("mousemove",a.mousemove),b.addEventListener("mousedown",a.mousedown),b.addEventListener("mouseup",a.mouseup),b.addEventListener("mousewheel",a.mousewheel),b.addEventListener("DOMMouseScroll",a.mousewheel),b.addEventListener("touchmove",a.mousemove),b.addEventListener("touchstart",a.mousedown),b.addEventListener("touchend",a.mouseup)},a.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},a.setOffset=function(a,b){a.offset.x=b.x,a.offset.y=b.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},a.setScale=function(a,b){a.scale.x=b.x,a.scale.y=b.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},a._getRelativeMousePosition=function(c,a,g){var d,e,b=a.getBoundingClientRect(),h=document.documentElement||document.body.parentNode||document.body,i=void 0!==window.pageXOffset?window.pageXOffset:h.scrollLeft,j=void 0!==window.pageYOffset?window.pageYOffset:h.scrollTop,f=c.changedTouches;return f?(d=f[0].pageX-b.left-i,e=f[0].pageY-b.top-j):(d=c.pageX-b.left-i,e=c.pageY-b.top-j),{x:d/(a.clientWidth/(a.width||a.clientWidth)*g),y:e/(a.clientHeight/(a.height||a.clientHeight)*g)}}},function(c,d,b){var a={};c.exports=a;var e=b(0),f=b(8);a.create=function(a){return e.extend({bodies:[],pairs:null},a)},a.setBodies=function(a,b){a.bodies=b.slice(0)},a.clear=function(a){a.bodies=[]},a.collisions=function(p){var e,i,k=[],q=p.pairs,j=p.bodies,r=j.length,v=a.canCollide,s=f.collides;for(j.sort(a._compareBoundsX),e=0;e<r;e++){var b=j[e],g=b.bounds,w=b.bounds.max.x,x=b.bounds.max.y,y=b.bounds.min.y,z=b.isStatic||b.isSleeping,l=b.parts.length,A=1===l;for(i=e+1;i<r;i++){var d=j[i],c=d.bounds;if(c.min.x>w)break;if(!(x<c.min.y)&&!(y>c.max.y)&&(!z|| !d.isStatic&&!d.isSleeping)&&v(b.collisionFilter,d.collisionFilter)){var m=d.parts.length;if(A&&1===m){var h=s(b,d,q);h&&k.push(h)}else for(var B=l>1?1:0,C=m>1?1:0,n=B;n<l;n++)for(var t=b.parts[n],g=t.bounds,o=C;o<m;o++){var u=d.parts[o],c=u.bounds;if(!(g.min.x>c.max.x)&&!(g.max.x<c.min.x)&&!(g.max.y<c.min.y)&&!(g.min.y>c.max.y)){var h=s(t,u,q);h&&k.push(h)}}}}}return k},a.canCollide=function(a,b){return a.group===b.group&&0!==a.group?a.group>0:(a.mask&b.category)!=0&&(b.mask&a.category)!=0},a._compareBoundsX=function(a,b){return a.bounds.min.x-b.bounds.min.x}},function(b,d,c){var a={};b.exports=a;var e=c(0);a._registry={},a.register=function(b){if(a.isPlugin(b)||e.warn("Plugin.register:",a.toString(b),"does not implement all required fields."),b.name in a._registry){var c=a._registry[b.name],d=a.versionParse(b.version).number,f=a.versionParse(c.version).number;d>f?(e.warn("Plugin.register:",a.toString(c),"was upgraded to",a.toString(b)),a._registry[b.name]=b):d<f?e.warn("Plugin.register:",a.toString(c),"can not be downgraded to",a.toString(b)):b!==c&&e.warn("Plugin.register:",a.toString(b),"is already registered to different plugin object")}else a._registry[b.name]=b;return b},a.resolve=function(b){return a._registry[a.dependencyParse(b).name]},a.toString=function(a){return"string"==typeof a?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},a.isPlugin=function(a){return a&&a.name&&a.version&&a.install},a.isUsed=function(a,b){return a.used.indexOf(b)> -1},a.isFor=function(b,c){var d=b.for&&a.dependencyParse(b.for);return!b.for||c.name===d.name&&a.versionSatisfies(c.version,d.range)},a.use=function(c,h){if(c.uses=(c.uses||[]).concat(h||[]),0===c.uses.length){e.warn("Plugin.use:",a.toString(c),"does not specify any dependencies to install.");return}for(var i=a.dependencies(c),g=e.topologicalSort(i),d=[],f=0;f<g.length;f+=1){if(g[f]!==c.name){var b=a.resolve(g[f]);if(!b){d.push("\u274C "+g[f]);continue}!a.isUsed(c,b.name)&&(a.isFor(b,c)||(e.warn("Plugin.use:",a.toString(b),"is for",b.for,"but installed on",a.toString(c)+"."),b._warned=!0),b.install?b.install(c):(e.warn("Plugin.use:",a.toString(b),"does not specify an install function."),b._warned=!0),b._warned?(d.push("\u{1F536} "+a.toString(b)),delete b._warned):d.push("\u2705 "+a.toString(b)),c.used.push(b.name))}}d.length>0&&e.info(d.join("  "))},a.dependencies=function(c,b){var g=a.dependencyParse(c),d=g.name;if(!(d in(b=b||{}))){c=a.resolve(c)||c,b[d]=e.map(c.uses||[],function(b){a.isPlugin(b)&&a.register(b);var f=a.dependencyParse(b),d=a.resolve(b);return d&&!a.versionSatisfies(d.version,f.range)?(e.warn("Plugin.dependencies:",a.toString(d),"does not satisfy",a.toString(f),"used by",a.toString(g)+"."),d._warned=!0,c._warned=!0):d||(e.warn("Plugin.dependencies:",a.toString(b),"used by",a.toString(g),"could not be resolved."),c._warned=!0),f.name});for(var f=0;f<b[d].length;f+=1)a.dependencies(b[d][f],b);return b}},a.dependencyParse=function(a){return e.isString(a)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(a)||e.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}):{name:a.name,range:a.range||a.version}},a.versionParse=function(b){var g=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;g.test(b)||e.warn("Plugin.versionParse:",b,"is not a valid version or range.");var a=g.exec(b),c=Number(a[4]),d=Number(a[5]),f=Number(a[6]);return{isRange:Boolean(a[1]||a[2]),version:a[3],range:b,operator:a[1]||a[2]||"",major:c,minor:d,patch:f,parts:[c,d,f],prerelease:a[7],number:1e8*c+1e4*d+f}},a.versionSatisfies=function(d,e){e=e||"*";var b=a.versionParse(e),c=a.versionParse(d);if(b.isRange){if("*"===b.operator||"*"===d)return!0;if(">"===b.operator)return c.number>b.number;if(">="===b.operator)return c.number>=b.number;if("~"===b.operator)return c.major===b.major&&c.minor===b.minor&&c.patch>=b.patch;if("^"===b.operator)return b.major>0?c.major===b.major&&c.number>=b.number:b.minor>0?c.minor===b.minor&&c.patch>=b.patch:c.patch===b.patch}return d===e||"*"===d}},function(c,l,b){var a={};c.exports=a;var d,e,f,g,h,i,j,k,m=b(0),n=b(5),o=b(1),p=b(4),q=b(2),r=b(13);"undefined"!=typeof window&&(d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(function(){a(m.now())},1e3/60)},e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),a._goodFps=30,a._goodDelta=1e3/60,a.create=function(c){var d={controller:a,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!c.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},b=m.extend(d,c);return b.canvas&&(b.canvas.width=b.options.width||b.canvas.width,b.canvas.height=b.options.height||b.canvas.height),b.mouse=c.mouse,b.engine=c.engine,b.canvas=b.canvas||h(b.options.width,b.options.height),b.context=b.canvas.getContext("2d"),b.textures={},b.bounds=b.bounds||{min:{x:0,y:0},max:{x:b.canvas.width,y:b.canvas.height}},b.options.showBroadphase=!1,1!==b.options.pixelRatio&&a.setPixelRatio(b,b.options.pixelRatio),m.isElement(b.element)?b.element.appendChild(b.canvas):b.canvas.parentNode||m.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),b},a.run=function(b){!function e(c){b.frameRequestId=d(e),f(b,c),a.world(b,c),(b.options.showStats||b.options.showDebug)&&a.stats(b,b.context,c),(b.options.showPerformance||b.options.showDebug)&&a.performance(b,b.context,c)}()},a.stop=function(a){e(a.frameRequestId)},a.setPixelRatio=function(d,a){var c=d.options,b=d.canvas;"auto"===a&&(a=i(b)),c.pixelRatio=a,b.setAttribute("data-pixel-ratio",a),b.width=c.width*a,b.height=c.height*a,b.style.width=c.width+"px",b.style.height=c.height+"px"},a.lookAt=function(a,e,d,j){j=void 0===j||j,e=m.isArray(e)?e:[e],d=d||{x:0,y:0};for(var b={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},n=0;n<e.length;n+=1){var c=e[n],h=c.bounds?c.bounds.min:c.min||c.position||c,i=c.bounds?c.bounds.max:c.max||c.position||c;h&&i&&(h.x<b.min.x&&(b.min.x=h.x),i.x>b.max.x&&(b.max.x=i.x),h.y<b.min.y&&(b.min.y=h.y),i.y>b.max.y&&(b.max.y=i.y))}var f=b.max.x-b.min.x+2*d.x,g=b.max.y-b.min.y+2*d.y,q=a.canvas.height,s=a.canvas.width,o=s/q,p=f/g,k=1,l=1;p>o?l=p/o:k=o/p,a.options.hasBounds=!0,a.bounds.min.x=b.min.x,a.bounds.max.x=b.min.x+f*k,a.bounds.min.y=b.min.y,a.bounds.max.y=b.min.y+g*l,j&&(a.bounds.min.x+=.5*f-f*k*.5,a.bounds.max.x+=.5*f-f*k*.5,a.bounds.min.y+=.5*g-g*l*.5,a.bounds.max.y+=.5*g-g*l*.5),a.bounds.min.x-=d.x,a.bounds.max.x-=d.x,a.bounds.min.y-=d.y,a.bounds.max.y-=d.y,a.mouse&&(r.setScale(a.mouse,{x:(a.bounds.max.x-a.bounds.min.x)/a.canvas.width,y:(a.bounds.max.y-a.bounds.min.y)/a.canvas.height}),r.setOffset(a.mouse,a.bounds.min))},a.startViewTransform=function(a){var b=a.bounds.max.x-a.bounds.min.x,c=a.bounds.max.y-a.bounds.min.y,d=b/a.options.width,e=c/a.options.height;a.context.setTransform(a.options.pixelRatio/d,0,0,a.options.pixelRatio/e,0,0),a.context.translate(-a.bounds.min.x,-a.bounds.min.y)},a.endViewTransform=function(a){a.context.setTransform(a.options.pixelRatio,0,0,a.options.pixelRatio,0,0)},a.world=function(b,D){var f,B=m.now(),h=b.engine,u=h.world,v=b.canvas,d=b.context,c=b.options,C=b.timing,i=n.allBodies(u),j=n.allConstraints(u),w=c.wireframes?c.wireframeBackground:c.background,e=[],l=[],x={timestamp:h.timing.timestamp};if(p.trigger(b,"beforeRender",x),b.currentBackground!==w&&k(b,w),d.globalCompositeOperation="source-in",d.fillStyle="transparent",d.fillRect(0,0,v.width,v.height),d.globalCompositeOperation="source-over",c.hasBounds){for(f=0;f<i.length;f++){var y=i[f];o.overlaps(y.bounds,b.bounds)&&e.push(y)}for(f=0;f<j.length;f++){var g=j[f],z=g.bodyA,A=g.bodyB,s=g.pointA,t=g.pointB;z&&(s=q.add(z.position,g.pointA)),A&&(t=q.add(A.position,g.pointB)),s&&t&&(o.contains(b.bounds,s)||o.contains(b.bounds,t))&&l.push(g)}a.startViewTransform(b),b.mouse&&(r.setScale(b.mouse,{x:(b.bounds.max.x-b.bounds.min.x)/b.options.width,y:(b.bounds.max.y-b.bounds.min.y)/b.options.height}),r.setOffset(b.mouse,b.bounds.min))}else l=j,e=i,1!==b.options.pixelRatio&&b.context.setTransform(b.options.pixelRatio,0,0,b.options.pixelRatio,0,0);!c.wireframes||h.enableSleeping&&c.showSleeping?a.bodies(b,e,d):(c.showConvexHulls&&a.bodyConvexHulls(b,e,d),a.bodyWireframes(b,e,d)),c.showBounds&&a.bodyBounds(b,e,d),(c.showAxes||c.showAngleIndicator)&&a.bodyAxes(b,e,d),c.showPositions&&a.bodyPositions(b,e,d),c.showVelocity&&a.bodyVelocity(b,e,d),c.showIds&&a.bodyIds(b,e,d),c.showSeparations&&a.separations(b,h.pairs.list,d),c.showCollisions&&a.collisions(b,h.pairs.list,d),c.showVertexNumbers&&a.vertexNumbers(b,e,d),c.showMousePosition&&a.mousePosition(b,b.mouse,d),a.constraints(l,d),c.hasBounds&&a.endViewTransform(b),p.trigger(b,"afterRender",x),C.lastElapsed=m.now()-B},a.stats=function(j,a,l){for(var f=j.engine,c=f.world,d=n.allBodies(c),g=0,b=0,e=0;e<d.length;e+=1)g+=d[e].parts.length;var h={Part:g,Body:d.length,Cons:n.allConstraints(c).length,Comp:n.allComposites(c).length,Pair:f.pairs.list.length};for(var i in a.fillStyle="#0e0f19",a.fillRect(b,0,302.5,44),a.font="12px Arial",a.textBaseline="top",a.textAlign="right",h){var k=h[i];a.fillStyle="#aaa",a.fillText(i,b+55,8),a.fillStyle="#eee",a.fillText(k,b+55,26),b+=55}},a.performance=function(e,b){var q=e.engine,c=e.timing,f=c.deltaHistory,h=c.elapsedHistory,i=c.timestampElapsedHistory,j=c.engineDeltaHistory,k=c.engineElapsedHistory,l=q.timing.lastDelta,m=g(f),n=g(h),s=g(j),o=g(k),r=g(i),d=r/m||0,p=1e3/m||0;b.fillStyle="#0e0f19",b.fillRect(0,50,370,34),a.status(b,10,69,60,4,f.length,Math.round(p)+" fps",p/a._goodFps,function(a){return f[a]/m-1}),a.status(b,82,69,60,4,j.length,l.toFixed(2)+" dt",a._goodDelta/l,function(a){return j[a]/s-1}),a.status(b,154,69,60,4,k.length,o.toFixed(2)+" ut",1-o/a._goodFps,function(a){return k[a]/o-1}),a.status(b,226,69,60,4,h.length,n.toFixed(2)+" rt",1-n/a._goodFps,function(a){return h[a]/n-1}),a.status(b,298,69,60,4,i.length,d.toFixed(2)+" x",d*d*d,function(a){return(i[a]/f[a]/d||0)-1})},a.status=function(a,b,c,e,f,h,i,j,g){a.strokeStyle="#888",a.fillStyle="#444",a.lineWidth=1,a.fillRect(b,c+7,e,1),a.beginPath(),a.moveTo(b,c+7-f*m.clamp(.4*g(0),-2,2));for(var d=0;d<e;d+=1)a.lineTo(b+d,c+7-(d<h?f*m.clamp(.4*g(d),-2,2):0));a.stroke(),a.fillStyle="hsl("+m.clamp(25+95*j,0,120)+",100%,60%)",a.fillRect(b,c-7,4,4),a.font="12px Arial",a.textBaseline="middle",a.textAlign="right",a.fillStyle="#eee",a.fillText(i,b+e,c-5)},a.constraints=function(j,o){for(var b=o,f=0;f<j.length;f++){var a=j[f];if(a.render.visible&&a.pointA&&a.pointB){var c,d,k=a.bodyA,l=a.bodyB;if(c=k?q.add(k.position,a.pointA):a.pointA,"pin"===a.render.type)b.beginPath(),b.arc(c.x,c.y,3,0,2*Math.PI),b.closePath();else{if(d=l?q.add(l.position,a.pointB):a.pointB,b.beginPath(),b.moveTo(c.x,c.y),"spring"===a.render.type)for(var g,h=q.sub(d,c),n=q.perp(q.normalise(h)),i=Math.ceil(m.clamp(a.length/5,12,20)),e=1;e<i;e+=1)g=e%2==0?1:-1,b.lineTo(c.x+h.x*(e/i)+n.x*g*4,c.y+h.y*(e/i)+n.y*g*4);b.lineTo(d.x,d.y)}a.render.lineWidth&&(b.lineWidth=a.render.lineWidth,b.strokeStyle=a.render.strokeStyle,b.stroke()),a.render.anchors&&(b.fillStyle=a.render.strokeStyle,b.beginPath(),b.arc(c.x,c.y,3,0,2*Math.PI),b.arc(d.x,d.y,3,0,2*Math.PI),b.closePath(),b.fill())}}},a.bodies=function(k,l,n){var e,a,h,i,b=n,f=(k.engine,k.options),m=f.showInternalEdges||!f.wireframes;for(h=0;h<l.length;h++)if((e=l[h]).render.visible){for(i=e.parts.length>1?1:0;i<e.parts.length;i++)if((a=e.parts[i]).render.visible){if(f.showSleeping&&e.isSleeping?b.globalAlpha=.5*a.render.opacity:1!==a.render.opacity&&(b.globalAlpha=a.render.opacity),a.render.sprite&&a.render.sprite.texture&&!f.wireframes){var d=a.render.sprite,g=j(k,d.texture);b.translate(a.position.x,a.position.y),b.rotate(a.angle),b.drawImage(g,-(g.width*d.xOffset)*d.xScale,-(g.height*d.yOffset)*d.yScale,g.width*d.xScale,g.height*d.yScale),b.rotate(-a.angle),b.translate(-a.position.x,-a.position.y)}else{if(a.circleRadius)b.beginPath(),b.arc(a.position.x,a.position.y,a.circleRadius,0,2*Math.PI);else{b.beginPath(),b.moveTo(a.vertices[0].x,a.vertices[0].y);for(var c=1;c<a.vertices.length;c++)!a.vertices[c-1].isInternal||m?b.lineTo(a.vertices[c].x,a.vertices[c].y):b.moveTo(a.vertices[c].x,a.vertices[c].y),a.vertices[c].isInternal&&!m&&b.moveTo(a.vertices[(c+1)%a.vertices.length].x,a.vertices[(c+1)%a.vertices.length].y);b.lineTo(a.vertices[0].x,a.vertices[0].y),b.closePath()}f.wireframes?(b.lineWidth=1,b.strokeStyle="#bbb",b.stroke()):(b.fillStyle=a.render.fillStyle,a.render.lineWidth&&(b.lineWidth=a.render.lineWidth,b.strokeStyle=a.render.strokeStyle,b.stroke()),b.fill())}b.globalAlpha=1}}},a.bodyWireframes=function(i,g,j){var d,a,e,b,f,c=j,h=i.options.showInternalEdges;for(c.beginPath(),e=0;e<g.length;e++)if((d=g[e]).render.visible)for(f=d.parts.length>1?1:0;f<d.parts.length;f++){for(a=d.parts[f],c.moveTo(a.vertices[0].x,a.vertices[0].y),b=1;b<a.vertices.length;b++)!a.vertices[b-1].isInternal||h?c.lineTo(a.vertices[b].x,a.vertices[b].y):c.moveTo(a.vertices[b].x,a.vertices[b].y),a.vertices[b].isInternal&&!h&&c.moveTo(a.vertices[(b+1)%a.vertices.length].x,a.vertices[(b+1)%a.vertices.length].y);c.lineTo(a.vertices[0].x,a.vertices[0].y)}c.lineWidth=1,c.strokeStyle="#bbb",c.stroke()},a.bodyConvexHulls=function(g,e,f){var a,d,c,b=f;for(b.beginPath(),d=0;d<e.length;d++)if((a=e[d]).render.visible&&1!==a.parts.length){for(b.moveTo(a.vertices[0].x,a.vertices[0].y),c=1;c<a.vertices.length;c++)b.lineTo(a.vertices[c].x,a.vertices[c].y);b.lineTo(a.vertices[0].x,a.vertices[0].y)}b.lineWidth=1,b.strokeStyle="rgba(255,255,255,0.2)",b.stroke()},a.vertexNumbers=function(i,f,h){var c,b,d,g=h;for(c=0;c<f.length;c++){var e=f[c].parts;for(d=e.length>1?1:0;d<e.length;d++){var a=e[d];for(b=0;b<a.vertices.length;b++)g.fillStyle="rgba(255,255,255,0.2)",g.fillText(c+"_"+b,a.position.x+(a.vertices[b].x-a.position.x)*.8,a.position.y+(a.vertices[b].y-a.position.y)*.8)}}},a.mousePosition=function(d,a,c){var b=c;b.fillStyle="rgba(255,255,255,0.8)",b.fillText(a.position.x+"  "+a.position.y,a.position.x+5,a.position.y-5)},a.bodyBounds=function(g,d,h){var a=h,i=(g.engine,g.options);a.beginPath();for(var c=0;c<d.length;c++)if(d[c].render.visible)for(var e=d[c].parts,f=e.length>1?1:0;f<e.length;f++){var b=e[f];a.rect(b.bounds.min.x,b.bounds.min.y,b.bounds.max.x-b.bounds.min.x,b.bounds.max.y-b.bounds.min.y)}i.wireframes?a.strokeStyle="rgba(255,255,255,0.08)":a.strokeStyle="rgba(0,0,0,0.1)",a.lineWidth=1,a.stroke()},a.bodyAxes=function(g,h,l){var a,f,c,d,b=l,i=(g.engine,g.options);for(b.beginPath(),f=0;f<h.length;f++){var j=h[f],e=j.parts;if(j.render.visible){if(i.showAxes)for(c=e.length>1?1:0;c<e.length;c++)for(d=0,a=e[c];d<a.axes.length;d++){var k=a.axes[d];b.moveTo(a.position.x,a.position.y),b.lineTo(a.position.x+20*k.x,a.position.y+20*k.y)}else for(c=e.length>1?1:0;c<e.length;c++)for(d=0,a=e[c];d<a.axes.length;d++)b.moveTo(a.position.x,a.position.y),b.lineTo((a.vertices[0].x+a.vertices[a.vertices.length-1].x)/2,(a.vertices[0].y+a.vertices[a.vertices.length-1].y)/2)}}i.wireframes?(b.strokeStyle="indianred",b.lineWidth=1):(b.strokeStyle="rgba(255, 255, 255, 0.4)",b.globalCompositeOperation="overlay",b.lineWidth=2),b.stroke(),b.globalCompositeOperation="source-over"},a.bodyPositions=function(g,d,h){var c,f,b,e,a=h,i=(g.engine,g.options);for(a.beginPath(),b=0;b<d.length;b++)if((c=d[b]).render.visible)for(e=0;e<c.parts.length;e++)f=c.parts[e],a.arc(f.position.x,f.position.y,3,0,2*Math.PI,!1),a.closePath();for(i.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0.5)",a.fill(),a.beginPath(),b=0;b<d.length;b++)(c=d[b]).render.visible&&(a.arc(c.positionPrev.x,c.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},a.bodyVelocity=function(f,d,e){var b=e;b.beginPath();for(var c=0;c<d.length;c++){var a=d[c];a.render.visible&&(b.moveTo(a.position.x,a.position.y),b.lineTo(a.position.x+(a.position.x-a.positionPrev.x)*2,a.position.y+(a.position.y-a.positionPrev.y)*2))}b.lineWidth=3,b.strokeStyle="cornflowerblue",b.stroke()},a.bodyIds=function(h,c,g){var a,b,d=g;for(a=0;a<c.length;a++)if(c[a].render.visible){var e=c[a].parts;for(b=e.length>1?1:0;b<e.length;b++){var f=e[b];d.font="12px Arial",d.fillStyle="rgba(255,255,255,0.5)",d.fillText(f.id,f.position.x+10,f.position.y-10)}}},a.collisions=function(k,e,l){var a,c,d,f,b=l,i=k.options;for(b.beginPath(),d=0;d<e.length;d++)if((a=e[d]).isActive)for(f=0,c=a.collision;f<a.activeContacts.length;f++){var j=a.activeContacts[f].vertex;b.rect(j.x-1.5,j.y-1.5,3.5,3.5)}for(i.wireframes?b.fillStyle="rgba(255,255,255,0.7)":b.fillStyle="orange",b.fill(),b.beginPath(),d=0;d<e.length;d++)if((a=e[d]).isActive&&(c=a.collision,a.activeContacts.length>0)){var g=a.activeContacts[0].vertex.x,h=a.activeContacts[0].vertex.y;2===a.activeContacts.length&&(g=(a.activeContacts[0].vertex.x+a.activeContacts[1].vertex.x)/2,h=(a.activeContacts[0].vertex.y+a.activeContacts[1].vertex.y)/2),c.bodyB===c.supports[0].body|| !0===c.bodyA.isStatic?b.moveTo(g-8*c.normal.x,h-8*c.normal.y):b.moveTo(g+8*c.normal.x,h+8*c.normal.y),b.lineTo(g,h)}i.wireframes?b.strokeStyle="rgba(255,165,0,0.7)":b.strokeStyle="orange",b.lineWidth=1,b.stroke()},a.separations=function(i,g,j){var h,e,b,d,f,c=j,k=i.options;for(c.beginPath(),f=0;f<g.length;f++)if((h=g[f]).isActive){b=(e=h.collision).bodyA;var a=1;(d=e.bodyB).isStatic||b.isStatic||(a=.5),d.isStatic&&(a=0),c.moveTo(d.position.x,d.position.y),c.lineTo(d.position.x-e.penetration.x*a,d.position.y-e.penetration.y*a),a=1,d.isStatic||b.isStatic||(a=.5),b.isStatic&&(a=0),c.moveTo(b.position.x,b.position.y),c.lineTo(b.position.x+e.penetration.x*a,b.position.y+e.penetration.y*a)}k.wireframes?c.strokeStyle="rgba(255,165,0,0.5)":c.strokeStyle="orange",c.stroke()},a.inspector=function(d,a){d.engine;var b,h=d.selected,c=d.render,i=c.options;if(i.hasBounds){var j=c.bounds.max.x-c.bounds.min.x,k=c.bounds.max.y-c.bounds.min.y,l=j/c.options.width,m=k/c.options.height;a.scale(1/l,1/m),a.translate(-c.bounds.min.x,-c.bounds.min.y)}for(var f=0;f<h.length;f++){var e=h[f].data;switch(a.translate(.5,.5),a.lineWidth=1,a.strokeStyle="rgba(255,165,0,0.9)",a.setLineDash([1,2]),e.type){case"body":b=e.bounds,a.beginPath(),a.rect(Math.floor(b.min.x-3),Math.floor(b.min.y-3),Math.floor(b.max.x-b.min.x+6),Math.floor(b.max.y-b.min.y+6)),a.closePath(),a.stroke();break;case"constraint":var g=e.pointA;e.bodyA&&(g=e.pointB),a.beginPath(),a.arc(g.x,g.y,10,0,2*Math.PI),a.closePath(),a.stroke()}a.setLineDash([]),a.translate(-0.5,-0.5)}null!==d.selectStart&&(a.translate(.5,.5),a.lineWidth=1,a.strokeStyle="rgba(255,165,0,0.6)",a.fillStyle="rgba(255,165,0,0.1)",b=d.selectBounds,a.beginPath(),a.rect(Math.floor(b.min.x),Math.floor(b.min.y),Math.floor(b.max.x-b.min.x),Math.floor(b.max.y-b.min.y)),a.closePath(),a.stroke(),a.fill(),a.translate(-0.5,-0.5)),i.hasBounds&&a.setTransform(1,0,0,1,0,0)},f=function(e,f){var d=e.engine,b=e.timing,c=b.historySize,g=d.timing.timestamp;b.delta=f-b.lastTime||a._goodDelta,b.lastTime=f,b.timestampElapsed=g-b.lastTimestamp||0,b.lastTimestamp=g,b.deltaHistory.unshift(b.delta),b.deltaHistory.length=Math.min(b.deltaHistory.length,c),b.engineDeltaHistory.unshift(d.timing.lastDelta),b.engineDeltaHistory.length=Math.min(b.engineDeltaHistory.length,c),b.timestampElapsedHistory.unshift(b.timestampElapsed),b.timestampElapsedHistory.length=Math.min(b.timestampElapsedHistory.length,c),b.engineElapsedHistory.unshift(d.timing.lastElapsed),b.engineElapsedHistory.length=Math.min(b.engineElapsedHistory.length,c),b.elapsedHistory.unshift(b.lastElapsed),b.elapsedHistory.length=Math.min(b.elapsedHistory.length,c)},g=function(a){for(var c=0,b=0;b<a.length;b+=1)c+=a[b];return c/a.length||0},h=function(b,c){var a=document.createElement("canvas");return a.width=b,a.height=c,a.oncontextmenu=function(){return!1},a.onselectstart=function(){return!1},a},i=function(b){var c,a=b.getContext("2d");return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)},j=function(c,a){var b=c.textures[a];return b||((b=c.textures[a]=new Image).src=a),b},k=function(b,a){var c=a;/(jpg|gif|png)$/.test(a)&&(c="url("+a+")"),b.canvas.style.background=c,b.canvas.style.backgroundSize="contain",b.currentBackground=a}},function(b,c){var a={};b.exports=a,a.create=function(a){return{vertex:a,normalImpulse:0,tangentImpulse:0}}},function(c,d,a){var b={};c.exports=b;var e=a(7),f=a(19),g=a(14),h=a(20),i=a(4),j=a(5),k=a(10),l=a(0),m=a(6);b.create=function(b){b=b||{};var a=l.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},b);return a.world=b.world||j.create({label:"World"}),a.pairs=b.pairs||h.create(),a.detector=b.detector||g.create(),a.grid={buckets:[]},a.world.gravity=a.gravity,a.broadphase=a.grid,a.metrics={},a},b.update=function(a,p,q){var u=l.now();p=p||1e3/60,q=q||1;var d,o=a.world,r=a.detector,m=a.pairs,c=a.timing,v=c.timestamp;c.timestamp+=p*c.timeScale,c.lastDelta=p*c.timeScale;var s={timestamp:c.timestamp};i.trigger(a,"beforeUpdate",s);var n=j.allBodies(o),t=j.allConstraints(o);for(o.isModified&&g.setBodies(r,n),o.isModified&&j.setModified(o,!1,!1,!0),a.enableSleeping&&e.update(n,c.timeScale),b._bodiesApplyGravity(n,a.gravity),b._bodiesUpdate(n,p,c.timeScale,q,o.bounds),k.preSolveAll(n),d=0;d<a.constraintIterations;d++)k.solveAll(t,c.timeScale);k.postSolveAll(n),r.pairs=a.pairs;var w=g.collisions(r);for(h.update(m,w,v),a.enableSleeping&&e.afterCollisions(m.list,c.timeScale),m.collisionStart.length>0&&i.trigger(a,"collisionStart",{pairs:m.collisionStart}),f.preSolvePosition(m.list),d=0;d<a.positionIterations;d++)f.solvePosition(m.list,c.timeScale);for(f.postSolvePosition(n),k.preSolveAll(n),d=0;d<a.constraintIterations;d++)k.solveAll(t,c.timeScale);for(k.postSolveAll(n),f.preSolveVelocity(m.list),d=0;d<a.velocityIterations;d++)f.solveVelocity(m.list,c.timeScale);return m.collisionActive.length>0&&i.trigger(a,"collisionActive",{pairs:m.collisionActive}),m.collisionEnd.length>0&&i.trigger(a,"collisionEnd",{pairs:m.collisionEnd}),b._bodiesClearForces(n),i.trigger(a,"afterUpdate",s),a.timing.lastElapsed=l.now()-u,a},b.merge=function(a,c){if(l.extend(a,c),c.world){a.world=c.world,b.clear(a);for(var f=j.allBodies(a.world),d=0;d<f.length;d++){var g=f[d];e.set(g,!1),g.id=l.nextId()}}},b.clear=function(a){h.clear(a.pairs),g.clear(a.detector)},b._bodiesClearForces=function(c){for(var a=0;a<c.length;a++){var b=c[a];b.force.x=0,b.force.y=0,b.torque=0}},b._bodiesApplyGravity=function(e,a){var c=void 0!==a.scale?a.scale:.001;if((0!==a.x||0!==a.y)&&0!==c)for(var d=0;d<e.length;d++){var b=e[d];b.isStatic||b.isSleeping||(b.force.y+=b.mass*a.y*c,b.force.x+=b.mass*a.x*c)}},b._bodiesUpdate=function(c,d,e,f,g){for(var a=0;a<c.length;a++){var b=c[a];b.isStatic||b.isSleeping||m.update(b,d,e,f)}}},function(c,d,b){var a={};c.exports=a;var e=b(3),f=b(1);a._restingThresh=4,a._restingThreshTangent=6,a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a.preSolvePosition=function(d){var a,b,c,e=d.length;for(a=0;a<e;a++)(b=d[a]).isActive&&(c=b.activeContacts.length,b.collision.parentA.totalContacts+=c,b.collision.parentB.totalContacts+=c)},a.solvePosition=function(j,m){var e,d,f,b,c,g,h,i,k=a._positionDampen,l=j.length;for(e=0;e<l;e++)(d=j[e]).isActive&&!d.isSensor&&(b=(f=d.collision).parentA,c=f.parentB,g=f.normal,d.separation=g.x*(c.positionImpulse.x+f.penetration.x-b.positionImpulse.x)+g.y*(c.positionImpulse.y+f.penetration.y-b.positionImpulse.y));for(e=0;e<l;e++)!(d=j[e]).isActive||d.isSensor||(b=(f=d.collision).parentA,c=f.parentB,g=f.normal,i=(d.separation-d.slop)*m,(b.isStatic||c.isStatic)&&(i*=2),b.isStatic||b.isSleeping||(h=k/b.totalContacts,b.positionImpulse.x+=g.x*i*h,b.positionImpulse.y+=g.y*i*h),c.isStatic||c.isSleeping||(h=k/c.totalContacts,c.positionImpulse.x-=g.x*i*h,c.positionImpulse.y-=g.y*i*h))},a.postSolvePosition=function(l){for(var m=a._positionWarming,n=l.length,o=e.translate,p=f.update,i=0;i<n;i++){var b=l[i],c=b.positionImpulse,g=c.x,h=c.y,j=b.velocity;if(b.totalContacts=0,0!==g||0!==h){for(var k=0;k<b.parts.length;k++){var d=b.parts[k];o(d.vertices,c),p(d.bounds,d.vertices,j),d.position.x+=g,d.position.y+=h}b.positionPrev.x+=g,b.positionPrev.y+=h,g*j.x+h*j.y<0?(c.x=0,c.y=0):(c.x*=m,c.y*=m)}}},a.preSolveVelocity=function(m){var c,d,q=m.length;for(c=0;c<q;c++){var e=m[c];if(e.isActive&&!e.isSensor){var n=e.activeContacts,r=n.length,f=e.collision,a=f.parentA,b=f.parentB,o=f.normal,p=f.tangent;for(d=0;d<r;d++){var j=n[d],g=j.vertex,k=j.normalImpulse,l=j.tangentImpulse;if(0!==k||0!==l){var h=o.x*k+p.x*l,i=o.y*k+p.y*l;a.isStatic||a.isSleeping||(a.positionPrev.x+=h*a.inverseMass,a.positionPrev.y+=i*a.inverseMass,a.anglePrev+=a.inverseInertia*((g.x-a.position.x)*i-(g.y-a.position.y)*h)),b.isStatic||b.isSleeping||(b.positionPrev.x-=h*b.inverseMass,b.positionPrev.y-=i*b.inverseMass,b.anglePrev-=b.inverseInertia*((g.x-b.position.x)*i-(g.y-b.position.y)*h))}}}}},a.solveVelocity=function(A,B){var e,f,k,l,m=B*B,N=a._restingThresh*m,O=a._frictionNormalMultiplier,P=a._restingThreshTangent*m,Q=Number.MAX_VALUE,R=A.length;for(k=0;k<R;k++){var g=A[k];if(g.isActive&&!g.isSensor){var i=g.collision,b=i.parentA,c=i.parentB,n=b.velocity,o=c.velocity,p=i.normal.x,q=i.normal.y,C=i.tangent.x,D=i.tangent.y,E=g.activeContacts,F=E.length,S=1/F,T=b.inverseMass+c.inverseMass,U=g.friction*g.frictionStatic*O*m;for(l=0,n.x=b.position.x-b.positionPrev.x,n.y=b.position.y-b.positionPrev.y,o.x=c.position.x-c.positionPrev.x,o.y=c.position.y-c.positionPrev.y,b.angularVelocity=b.angle-b.anglePrev,c.angularVelocity=c.angle-c.anglePrev;l<F;l++){var d=E[l],r=d.vertex,v=r.x-b.position.x,w=r.y-b.position.y,x=r.x-c.position.x,y=r.y-c.position.y,V=n.x-w*b.angularVelocity,W=n.y+v*b.angularVelocity,X=o.x-y*c.angularVelocity,Y=o.y+x*c.angularVelocity,G=V-X,H=W-Y,j=p*G+q*H,h=C*G+D*H,I=g.separation+j,z=Math.min(I,1);z=I<0?0:z;var J=z*U;h>J|| -h>J?(f=h>0?h:-h,(e=g.friction*(h>0?1:-1)*m)< -f?e=-f:e>f&&(e=f)):(e=h,f=Q);var K=v*q-w*p,L=x*q-y*p,M=S/(T+b.inverseInertia*K*K+c.inverseInertia*L*L),s=(1+g.restitution)*j*M;if(e*=M,j*j>N&&j<0)d.normalImpulse=0;else{var Z=d.normalImpulse;d.normalImpulse+=s,d.normalImpulse=Math.min(d.normalImpulse,0),s=d.normalImpulse-Z}if(h*h>P)d.tangentImpulse=0;else{var $=d.tangentImpulse;d.tangentImpulse+=e,d.tangentImpulse< -f&&(d.tangentImpulse=-f),d.tangentImpulse>f&&(d.tangentImpulse=f),e=d.tangentImpulse-$}var t=p*s+C*e,u=q*s+D*e;b.isStatic||b.isSleeping||(b.positionPrev.x+=t*b.inverseMass,b.positionPrev.y+=u*b.inverseMass,b.anglePrev+=(v*u-w*t)*b.inverseInertia),c.isStatic||c.isSleeping||(c.positionPrev.x-=t*c.inverseMass,c.positionPrev.y-=u*c.inverseMass,c.anglePrev-=(x*u-y*t)*c.inverseInertia)}}}}},function(c,d,b){var a={};c.exports=a;var e=b(9),f=b(0);a.create=function(a){return f.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},a.update=function(d,k,f){var g,l,b,a,c=d.list,h=c.length,m=d.table,p=k.length,i=d.collisionStart,n=d.collisionEnd,o=d.collisionActive;for(a=0,i.length=0,n.length=0,o.length=0;a<h;a++)c[a].confirmedActive=!1;for(a=0;a<p;a++)(b=(g=k[a]).pair)?(b.isActive?o.push(b):i.push(b),e.update(b,g,f),b.confirmedActive=!0):(m[(b=e.create(g,f)).id]=b,i.push(b),c.push(b));var j=[];for(a=0,h=c.length;a<h;a++)(b=c[a]).confirmedActive||(e.setActive(b,!1,f),n.push(b),b.collision.bodyA.isSleeping||b.collision.bodyB.isSleeping||j.push(a));for(a=0;a<j.length;a++)b=c[l=j[a]-a],c.splice(l,1),delete m[b.id]},a.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}},function(c,d,b){var a=c.exports=b(22);a.Axes=b(11),a.Bodies=b(12),a.Body=b(6),a.Bounds=b(1),a.Collision=b(8),a.Common=b(0),a.Composite=b(5),a.Composites=b(23),a.Constraint=b(10),a.Contact=b(17),a.Detector=b(14),a.Engine=b(18),a.Events=b(4),a.Grid=b(24),a.Mouse=b(13),a.MouseConstraint=b(25),a.Pair=b(9),a.Pairs=b(20),a.Plugin=b(15),a.Query=b(26),a.Render=b(16),a.Resolver=b(19),a.Runner=b(27),a.SAT=b(28),a.Sleeping=b(7),a.Svg=b(29),a.Vector=b(2),a.Vertices=b(3),a.World=b(30),a.Engine.run=a.Runner.run,a.Common.deprecated(a.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(c,d,b){var a={};c.exports=a;var e=b(15),f=b(0);a.name="matter-js",a.version="0.18.0",a.uses=[],a.used=[],a.use=function(){e.use(a,Array.prototype.slice.call(arguments))},a.before=function(b,c){return b=b.replace(/^Matter./,""),f.chainPathBefore(a,b,c)},a.after=function(b,c){return b=b.replace(/^Matter./,""),f.chainPathAfter(a,b,c)}},function(d,f,b){var a={};d.exports=a;var g=b(5),h=b(10),e=b(0),i=b(6),j=b(12),c=e.deprecated;a.stack=function(h,o,p,q,j,r,s){for(var k,l=g.create({label:"Stack"}),b=h,m=o,n=0,c=0;c<q;c++){for(var d=0,e=0;e<p;e++){var a=s(b,m,e,c,k,n);if(a){var f=a.bounds.max.y-a.bounds.min.y,t=a.bounds.max.x-a.bounds.min.x;f>d&&(d=f),i.translate(a,{x:.5*t,y:.5*f}),b=a.bounds.max.x+j,g.addBody(l,a),k=a,n+=1}else b+=j}m+=d+r,b=h}return l},a.chain=function(c,i,j,k,l,m){for(var f=c.bodies,d=1;d<f.length;d++){var a=f[d-1],b=f[d],n=a.bounds.max.y-a.bounds.min.y,o=a.bounds.max.x-a.bounds.min.x,p=b.bounds.max.y-b.bounds.min.y,q=b.bounds.max.x-b.bounds.min.x,r={bodyA:a,pointA:{x:o*i,y:n*j},bodyB:b,pointB:{x:q*k,y:p*l}},s=e.extend(r,m);g.addConstraint(c,h.create(s))}return c.label+=" Chain",c},a.mesh=function(d,c,n,m,j){var b,a,k,f,l,i=d.bodies;for(b=0;b<n;b++){for(a=1;a<c;a++)k=i[a-1+b*c],f=i[a+b*c],g.addConstraint(d,h.create(e.extend({bodyA:k,bodyB:f},j)));if(b>0)for(a=0;a<c;a++)k=i[a+(b-1)*c],f=i[a+b*c],g.addConstraint(d,h.create(e.extend({bodyA:k,bodyB:f},j))),m&&a>0&&(l=i[a-1+(b-1)*c],g.addConstraint(d,h.create(e.extend({bodyA:l,bodyB:f},j)))),m&&a<c-1&&(l=i[a+1+(b-1)*c],g.addConstraint(d,h.create(e.extend({bodyA:l,bodyB:f},j))))}return d.label+=" Mesh",d},a.pyramid=function(b,c,d,e,f,g,h){return a.stack(b,c,d,e,f,g,function(p,m,a,g,c,j){var k=Math.min(e,Math.ceil(d/2)),l=c?c.bounds.max.x-c.bounds.min.x:0;if(!(g>k)){var n=g=k-g,o=d-1-g;if(!(a<n)&&!(a>o))return 1===j&&i.translate(c,{x:(a+(d%2==1?1:-1))*l,y:0}),h(b+(c?a*l:0)+a*f,m,a,g,c,j)}})},a.newtonsCradle=function(d,e,k,b,l){for(var c=g.create({label:"Newtons Cradle"}),a=0;a<k;a++){var f=1.9,i=j.circle(d+a*(b*f),e+l,b,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),m=h.create({pointA:{x:d+a*(b*f),y:e},bodyB:i});g.addBody(c,i),g.addConstraint(c,m)}return c},c(a,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),a.car=function(b,c,d,k,l){var e=i.nextGroup(!0),m=-(.5*d)+20,n=.5*d-20,a=g.create({label:"Car"}),f=j.rectangle(b,c,d,k,{collisionFilter:{group:e},chamfer:{radius:.5*k},density:2e-4}),o=j.circle(b+m,c+0,l,{collisionFilter:{group:e},friction:.8}),p=j.circle(b+n,c+0,l,{collisionFilter:{group:e},friction:.8}),q=h.create({bodyB:f,pointB:{x:m,y:0},bodyA:o,stiffness:1,length:0}),r=h.create({bodyB:f,pointB:{x:n,y:0},bodyA:p,stiffness:1,length:0});return g.addBody(a,f),g.addBody(a,o),g.addBody(a,p),g.addConstraint(a,q),g.addConstraint(a,r),a},c(a,"car","Composites.car \u27A4 moved to car example"),a.softBody=function(h,i,d,f,k,l,m,n,g,b){g=e.extend({inertia:1/0},g),b=e.extend({stiffness:.2,render:{type:"line",anchors:!1}},b);var c=a.stack(h,i,d,f,k,l,function(a,b){return j.circle(a,b,n,g)});return a.mesh(c,d,f,m,b),c.label="Soft Body",c},c(a,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")},function(d,f,b){var a={};d.exports=a;var g=b(9),e=b(0),c=e.deprecated;a.create=function(a){return e.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},a)},a.update=function(f,m,r,i){var j,d,e,g,n,h=r.world,o=f.buckets,p=!1;for(j=0;j<m.length;j++){var b=m[j];if((!b.isSleeping||i)&&(!h.bounds|| !(b.bounds.max.x<h.bounds.min.x)&&!(b.bounds.min.x>h.bounds.max.x)&&!(b.bounds.max.y<h.bounds.min.y)&&!(b.bounds.min.y>h.bounds.max.y))){var c=a._getRegion(f,b);if(!b.region||c.id!==b.region.id||i){(!b.region||i)&&(b.region=c);var k=a._regionUnion(c,b.region);for(d=k.startCol;d<=k.endCol;d++)for(e=k.startRow;e<=k.endRow;e++){g=o[n=a._getBucketId(d,e)];var q=d>=c.startCol&&d<=c.endCol&&e>=c.startRow&&e<=c.endRow,l=d>=b.region.startCol&&d<=b.region.endCol&&e>=b.region.startRow&&e<=b.region.endRow;!q&&l&&l&&g&&a._bucketRemoveBody(f,g,b),(b.region===c||q&&!l||i)&&(g||(g=a._createBucket(o,n)),a._bucketAddBody(f,g,b))}b.region=c,p=!0}}}p&&(f.pairsList=a._createActivePairsList(f))},c(a,"update","Grid.update \u27A4 replaced by Matter.Detector"),a.clear=function(a){a.buckets={},a.pairs={},a.pairsList=[]},c(a,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),a._regionUnion=function(b,c){var d=Math.min(b.startCol,c.startCol),e=Math.max(b.endCol,c.endCol),f=Math.min(b.startRow,c.startRow),g=Math.max(b.endRow,c.endRow);return a._createRegion(d,e,f,g)},a._getRegion=function(b,d){var c=d.bounds,e=Math.floor(c.min.x/b.bucketWidth),f=Math.floor(c.max.x/b.bucketWidth),g=Math.floor(c.min.y/b.bucketHeight),h=Math.floor(c.max.y/b.bucketHeight);return a._createRegion(e,f,g,h)},a._createRegion=function(a,b,c,d){return{id:a+","+b+","+c+","+d,startCol:a,endCol:b,startRow:c,endRow:d}},a._getBucketId=function(a,b){return"C"+a+"R"+b},a._createBucket=function(a,b){return a[b]=[]},a._bucketAddBody=function(i,d,a){var b,e=i.pairs,j=g.id,k=d.length;for(b=0;b<k;b++){var c=d[b];if(a.id!==c.id&&(!a.isStatic||!c.isStatic)){var f=j(a,c),h=e[f];h?h[2]+=1:e[f]=[a,c,1]}}d.push(a)},a._bucketRemoveBody=function(f,a,c){var b,h=f.pairs,i=g.id;a.splice(e.indexOf(a,c),1);var j=a.length;for(b=0;b<j;b++){var d=h[i(c,a[b])];d&&(d[2]-=1)}},a._createActivePairsList=function(g){var d,a,b=g.pairs,c=e.keys(b),h=c.length,f=[];for(a=0;a<h;a++)(d=b[c[a]])[2]>0?f.push(d):delete b[c[a]];return f}},function(c,d,a){var b={};c.exports=b;var e=a(3),f=a(7),g=a(13),h=a(4),i=a(14),j=a(10),k=a(5),l=a(0),m=a(1);b.create=function(a,c){var d=(a?a.mouse:null)||(c?c.mouse:null);d||(a&&a.render&&a.render.canvas?d=g.create(a.render.canvas):c&&c.element?d=g.create(c.element):(d=g.create(),l.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var e=j.create({label:"Mouse Constraint",pointA:d.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),f={type:"mouseConstraint",mouse:d,element:null,body:null,constraint:e,collisionFilter:{category:1,mask:4294967295,group:0}},i=l.extend(f,c);return h.on(a,"beforeUpdate",function(){var c=k.allBodies(a.world);b.update(i,c),b._triggerEvents(i)}),i},b.update=function(d,k){var b=d.mouse,c=d.constraint,a=d.body;if(0===b.button){if(c.bodyB)f.set(c.bodyB,!1),c.pointA=b.position;else for(var g=0;g<k.length;g++)if(a=k[g],m.contains(a.bounds,b.position)&&i.canCollide(a.collisionFilter,d.collisionFilter))for(var j=a.parts.length>1?1:0;j<a.parts.length;j++){var l=a.parts[j];if(e.contains(l.vertices,b.position)){c.pointA=b.position,c.bodyB=d.body=a,c.pointB={x:b.position.x-a.position.x,y:b.position.y-a.position.y},c.angleB=a.angle,f.set(a,!1),h.trigger(d,"startdrag",{mouse:b,body:a});break}}}else c.bodyB=d.body=null,c.pointB=null,a&&h.trigger(d,"enddrag",{mouse:b,body:a})},b._triggerEvents=function(b){var a=b.mouse,c=a.sourceEvents;c.mousemove&&h.trigger(b,"mousemove",{mouse:a}),c.mousedown&&h.trigger(b,"mousedown",{mouse:a}),c.mouseup&&h.trigger(b,"mouseup",{mouse:a}),g.clearSourceEvents(a)}},function(c,d,a){var b={};c.exports=b;var e=a(2),f=a(8),g=a(1),h=a(12),i=a(3);b.collides=function(d,e){for(var h=[],n=e.length,i=d.bounds,o=f.collides,j=g.overlaps,a=0;a<n;a++){var b=e[a],k=b.parts.length,p=1===k?0:1;if(j(b.bounds,i))for(var c=p;c<k;c++){var l=b.parts[c];if(j(l.bounds,i)){var m=o(l,d);if(m){h.push(m);break}}}}return h},b.ray=function(j,a,c,d){d=d||1e-100;for(var k=e.angle(a,c),l=e.magnitude(e.sub(a,c)),m=(c.x+a.x)*.5,n=(c.y+a.y)*.5,o=h.rectangle(m,n,l,d,{angle:k}),f=b.collides(o,j),g=0;g<f.length;g+=1){var i=f[g];i.body=i.bodyB=i.bodyA}return f},b.region=function(b,h,c){for(var d=[],a=0;a<b.length;a++){var e=b[a],f=g.overlaps(e.bounds,h);(f&&!c|| !f&&c)&&d.push(e)}return d},b.point=function(e,b){for(var f=[],c=0;c<e.length;c++){var a=e[c];if(g.contains(a.bounds,b))for(var d=1===a.parts.length?0:1;d<a.parts.length;d++){var h=a.parts[d];if(g.contains(h.bounds,b)&&i.contains(h.vertices,b)){f.push(a);break}}}return f}},function(e,f,b){var a={};e.exports=a;var c,d,g,h=b(4),i=b(18),j=b(0);"undefined"!=typeof window&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),c||(c=function(a){g=setTimeout(function(){a(j.now())},1e3/60)},d=function(){clearTimeout(g)}),a.create=function(b){var a=j.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},b);return a.delta=a.delta||1e3/a.fps,a.deltaMin=a.deltaMin||1e3/a.fps,a.deltaMax=a.deltaMax||1e3/(.5*a.fps),a.fps=1e3/a.delta,a},a.run=function(b,d){return void 0!==b.positionIterations&&(d=b,b=a.create()),function f(e){b.frameRequestId=c(f),e&&b.enabled&&a.tick(b,d,e)}(),b},a.tick=function(a,g,c){var b,f=g.timing,d=1,e={timestamp:f.timestamp};h.trigger(a,"beforeTick",e),a.isFixed?b=a.delta:(b=c-a.timePrev||a.delta,a.timePrev=c,a.deltaHistory.push(b),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),b=Math.min.apply(null,a.deltaHistory),b=b<a.deltaMin?a.deltaMin:b,b=b>a.deltaMax?a.deltaMax:b,d=b/a.delta,a.delta=b),0!==a.timeScalePrev&&(d*=f.timeScale/a.timeScalePrev),0===f.timeScale&&(d=0),a.timeScalePrev=f.timeScale,a.correction=d,a.frameCounter+=1,c-a.counterTimestamp>=1e3&&(a.fps=a.frameCounter*((c-a.counterTimestamp)/1e3),a.counterTimestamp=c,a.frameCounter=0),h.trigger(a,"tick",e),h.trigger(a,"beforeUpdate",e),i.update(g,b,d),h.trigger(a,"afterUpdate",e),h.trigger(a,"afterTick",e)},a.stop=function(a){d(a.frameRequestId)},a.start=function(b,c){a.run(b,c)}},function(c,e,b){var a={};c.exports=a;var f=b(8),d=b(0).deprecated;a.collides=function(a,b){return f.collides(a,b)},d(a,"collides","SAT.collides \u27A4 replaced by Collision.collides")},function(c,d,b){var a={};c.exports=a,b(1);var e=b(0);a.pathToVertices=function(c,i){"undefined"==typeof window||"SVGPathSeg"in window||e.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var b,j,k,l,f,g,d,m,q,r,s,t,o=[],h=0,u=0,v=0;i=i||15;var p=function(a,b,c){var d=c%2==1&&c>1;if(!q||a!=q.x||b!=q.y){q&&d?(s=q.x,t=q.y):(s=0,t=0);var e={x:s+a,y:t+b};(d||!q)&&(q=e),o.push(e),u=s+a,v=t+b}},n=function(a){var b=a.pathSegTypeAsLetter.toUpperCase();if("Z"!==b){switch(b){case"M":case"L":case"T":case"C":case"S":case"Q":u=a.x,v=a.y;break;case"H":u=a.x;break;case"V":v=a.y}p(u,v,a.pathSegType)}};for(a._svgPathToAbsolute(c),k=c.getTotalLength(),g=[],b=0;b<c.pathSegList.numberOfItems;b+=1)g.push(c.pathSegList.getItem(b));for(d=g.concat();h<k;){if((f=g[c.getPathSegAtLength(h)])!=m){for(;d.length&&d[0]!=f;)n(d.shift());m=f}switch(f.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":p((l=c.getPointAtLength(h)).x,l.y,0)}h+=i}for(b=0,j=d.length;b<j;++b)n(d[b]);return o},a._svgPathToAbsolute=function(f){for(var l,m,h,i,j,k,e=f.pathSegList,b=0,c=0,n=e.numberOfItems,d=0;d<n;++d){var a=e.getItem(d),g=a.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(g))"x"in a&&(b=a.x),"y"in a&&(c=a.y);else switch("x1"in a&&(h=b+a.x1),"x2"in a&&(j=b+a.x2),"y1"in a&&(i=c+a.y1),"y2"in a&&(k=c+a.y2),"x"in a&&(b+=a.x),"y"in a&&(c+=a.y),g){case"m":e.replaceItem(f.createSVGPathSegMovetoAbs(b,c),d);break;case"l":e.replaceItem(f.createSVGPathSegLinetoAbs(b,c),d);break;case"h":e.replaceItem(f.createSVGPathSegLinetoHorizontalAbs(b),d);break;case"v":e.replaceItem(f.createSVGPathSegLinetoVerticalAbs(c),d);break;case"c":e.replaceItem(f.createSVGPathSegCurvetoCubicAbs(b,c,h,i,j,k),d);break;case"s":e.replaceItem(f.createSVGPathSegCurvetoCubicSmoothAbs(b,c,j,k),d);break;case"q":e.replaceItem(f.createSVGPathSegCurvetoQuadraticAbs(b,c,h,i),d);break;case"t":e.replaceItem(f.createSVGPathSegCurvetoQuadraticSmoothAbs(b,c),d);break;case"a":e.replaceItem(f.createSVGPathSegArcAbs(b,c,a.r1,a.r2,a.angle,a.largeArcFlag,a.sweepFlag),d);break;case"z":case"Z":b=l,c=m}("M"==g||"m"==g)&&(l=b,m=c)}}},function(d,e,c){var a={};d.exports=a;var b=c(5);c(0),a.create=b.create,a.add=b.add,a.remove=b.remove,a.clear=b.clear,a.addComposite=b.addComposite,a.addBody=b.addBody,a.addConstraint=b.addConstraint}])})}}])